"use strict";(self.webpackChunkpactap_admin=self.webpackChunkpactap_admin||[]).push([[849],{50412:(M,L,p)=>{p.d(L,{v:()=>x});var m=p(69862),l=p(20553),a=p(65619),Z=p(99468);let x=(()=>{class T{constructor(t){this.http=t,this.paramSource=new a.X(""),this.currentParam=this.paramSource.asObservable(),this.customer=new a.X(null)}changeParam(t){this.paramSource.next(t)}getCustomer(){return this.customer.asObservable()}updateCustomer(t){this.customer.next(t)}uploadLogo(t){return this.http.post(`${l.N.apiUrl}customer/me/logo`,t)}updateCompanyProfile(t){return this.http.patch(`${l.N.apiUrl}customer/me/companyProfile`,t)}getCustomerList(t,s,u,g,_,h,C){return this.http.post(h?`${l.N.apiUrl}customer/me/list?searchTxt=${s}&country=${_}&status=${t}&startDt=${u}&endDt=${g}&page=${h}&contentPerPage=${C}`:`${l.N.apiUrl}customer/me/list?searchTxt=${s}&country=${_}&status=${t}&startDt=${u}&endDt=${g}`,{})}exportCustomerListDetails(t,s,u,g,_,h){const C=new m.WM({"Content-Type":"application/octet-stream"});return this.http.post(`${l.N.apiUrl}customer/me/list?searchTxt=${s}&country=${_}&status=${t}&startDt=${u}&endDt=${g}&isExcelDownload=true`,h,{headers:C,responseType:"blob"})}getCustomerGrades(){return this.http.get(`${l.N.apiUrl}margin-automation/dropdown/CUSTOMER_GRADE`)}getInvitedCustomerList(t,s,u,g,_,h,C){return this.http.get(`${l.N.apiUrl}customer/invite/list?searchTxt=${s}&country=${u}&status=${t}&startDt=${g}&endDt=${_}&page=${h}&contentPerPage=${C}`)}getCompanyProfile(t){return this.http.get(`${l.N.apiUrl}customer/me/companyProfile/${t}`)}getCountryList(){return this.http.get(`${l.N.apiUrl}location/country`)}getStateList(t,s,u){return this.http.get(`${l.N.apiUrl}location/state?page=${t}&contentPerPage=${s}&countryCode=${u}`)}getMappedPort(){return this.http.get(`${l.N.apiUrl}customer/me/mappedPort`)}getAddressList(t,s){return this.http.get(`${l.N.apiUrl}customer/address/list?addressType=${t}&addressUserId=${s}`)}addAddress(t){return this.http.post(`${l.N.apiUrl}customer/address/add`,t)}updateAddress(t){return this.http.put(`${l.N.apiUrl}customer/address/update`,t)}deleteAddress(t){return this.http.delete(`${l.N.apiUrl}customer/address/delete/${t}`)}addUser(t){return this.http.post(`${l.N.apiUrl}customer/user`,t)}inviteUser(t){return this.http.post(`${l.N.apiUrl}customer/me/create`,t)}reInviteUser(t){return this.http.put(`${l.N.apiUrl}customer/invite/reinvite/${t}`,{})}updateUser(t){return this.http.patch(`${l.N.apiUrl}customer/user`,t)}deleteUser(t,s){return this.http.delete(`${l.N.apiUrl}customer/user/${s}/${t}`)}getUserList(t){return this.http.get(`${l.N.apiUrl}customer/user/${t}`)}uploadAttachment(t,s){return this.http.patch(`${l.N.apiUrl}customer/me/attachment/${s}`,t)}updatePaymentTerms(t){return this.http.patch(`${l.N.apiUrl}customer/me/paymentTerms`,t)}updateCreditPeriod(t){return this.http.patch(`${l.N.apiUrl}customer/me/creditPeriod`,t)}deleteAttachment(t){return this.http.request("delete",`${l.N.apiUrl}customer/me/attachment`,{body:t})}getRoleList(){return this.http.get(`${l.N.apiUrl}teams/role?status=ACTIVE`)}getAccountManager(){return this.http.get(`${l.N.apiUrl}customer/me/support/ACCOUNT_MANAGER`)}getEscalationManager(){return this.http.get(`${l.N.apiUrl}customer/me/support/ESCALATION_MANAGER`)}getCustomerSupportManager(){return this.http.get(`${l.N.apiUrl}customer/me/support/CUSTOMER_SUPPORT`)}updateManagerSupport(t){return this.http.patch(`${l.N.apiUrl}customer/me/support`,t)}deleteSupport(t,s){return this.http.delete(`${l.N.apiUrl}customer/me/support/${t}/${s}`)}updateGrade(t){return this.http.patch(`${l.N.apiUrl}customer/me/grades`,t)}changeStatus(t){return this.http.patch(`${l.N.apiUrl}customer/me/status`,t)}changeStatusActionRequired(t,s,u){return this.http.put(`${l.N.apiUrl}customer/user/status/${t}/${s}/${u}`,{})}getProductList(t,s){return this.http.get(`${l.N.apiUrl}customer/product/list/${s}`,{params:t})}deleteProduct(t,s){return this.http.delete(`${l.N.apiUrl}customer/product/delete/${t}/${s}`)}productStatus(t){return this.http.put(`${l.N.apiUrl}customer/product/status`,t)}getAllProductList(){return this.http.get(`${l.N.apiUrl}product/list?status=ACTIVE`)}getQuotesList(t,s){return this.http.get(`${l.N.apiUrl}quote/list/${s}`,{params:t})}getReconciliationList(t){return this.http.get(`${l.N.apiUrl}reconciliation`,{params:t})}exportReconciliationList(t,s){const u=new m.WM({"Content-Type":"application/octet-stream"});return this.http.post(`${l.N.apiUrl}reconciliation/reconciliationExcelList`,s,{headers:u,responseType:"blob",params:t})}getReconciliationSummary(t){return this.http.get(`${l.N.apiUrl}reconciliation/deposit/summary/${t}`)}getCreditList(t){return this.http.get(`${l.N.apiUrl}reconciliation/credit`,{params:t})}getOrderList(t){return this.http.get(`${l.N.apiUrl}reconciliation/order/${t}`)}getDepositList(t){return this.http.get(`${l.N.apiUrl}reconciliation/deposit`,{params:t})}updateDepositPercentage(t){return this.http.patch(`${l.N.apiUrl}reconciliation/deposit/percentage`,t)}addDeposit(t){return this.http.post(`${l.N.apiUrl}reconciliation/deposit`,t)}updateDeposit(t){return this.http.patch(`${l.N.apiUrl}reconciliation/deposit`,t)}updateCredit(t){return this.http.patch(`${l.N.apiUrl}reconciliation/credit`,t)}addCredit(t){return this.http.post(`${l.N.apiUrl}reconciliation/credit`,t)}getDepositDetails(t){return this.http.get(`${l.N.apiUrl}reconciliation/deposit/${t}`)}getCreditDetails(t){return this.http.get(`${l.N.apiUrl}reconciliation/credit/${t}`)}deleteDeposit(t){return this.http.delete(`${l.N.apiUrl}reconciliation/deposit/${t}`)}deleteCredit(t){return this.http.delete(`${l.N.apiUrl}reconciliation/credit/${t}`)}updateAddressStatus(t){return this.http.put(`${l.N.apiUrl}customer/address/status`,t)}addCustomer(t){return this.http.post(`${l.N.apiUrl}customer/me/add`,t)}changeCreditFreezeStatus(t){return this.http.post(`${l.N.apiUrl}customer/me/changeCreditFreeze`,t)}getDeleteRequestCustomers(t,s){return this.http.get(`${l.N.apiUrl}customer/user/delete-request?page=${t}&contentPerPage=${s}`)}getNativeCurrency(t){return this.http.get(`${l.N.apiUrl}reconciliation/nativeCurrency/${t}`)}getCreditLimit(t){return this.http.get(`${l.N.apiUrl}reconciliation/creditlimit/${t}`)}getTransactions(t,s,u,g){return this.http.get(`${l.N.apiUrl}reconciliation/transactions?customerId=${t}&currency=${s}&page=${u}&contentPerPage=${g}`)}uploadAttachement(t){return this.http.post(`${l.N.apiUrl}reconciliation/transactions/attachments`,t)}addTransaction(t){return this.http.post(`${l.N.apiUrl}reconciliation/transactions`,t)}getInvoiceListForCreditNote(t){return this.http.get(`${l.N.apiUrl}reconciliation/transactions/raiseInvoiceBycurreny?customerId=${t}`)}getInvoiceListByCurrency(t,s){return this.http.get(`${l.N.apiUrl}reconciliation/transactions/raiseInvoiceBycurreny?customerId=${t}&currency=${s}`)}getInvoiceListForDebitNote(t){return this.http.get(`${l.N.apiUrl}reconciliation/transactions/raiseInvoice/${t}`)}getTransactionDetails(t){return this.http.get(`${l.N.apiUrl}reconciliation/transactions/${t}`)}getCurrencyConversionData(t){return this.http.post(`${l.N.apiUrl}reconciliation/settlement/currencyConversion`,t)}getSettlementStatement(t){return this.http.get(`${l.N.apiUrl}reconciliation/settlement/statment/${t}`)}getSettlementList(t){return this.http.get(`${l.N.apiUrl}reconciliation/settlement/list/${t}?contentPerPage=100&page=1`)}downloadExcelDeposit(t){const s=new m.WM({"Content-Type":"application/octet-stream"});return this.http.get(`${l.N.apiUrl}/reconciliation/downloadDepositExcel/${t}`,{headers:s,responseType:"blob"})}downloadExcelCredit(t){const s=new m.WM({"Content-Type":"application/octet-stream"});return this.http.get(`${l.N.apiUrl}reconciliation/downloadCreditExcel/${t}`,{headers:s,responseType:"blob"})}downloadExcelSettlement(t){const s=new m.WM({"Content-Type":"application/octet-stream"});return this.http.get(`${l.N.apiUrl}reconciliation/downloadSettlementExcel/${t}`,{headers:s,responseType:"blob"})}downloadExceltransaction(t){const s=new m.WM({"Content-Type":"application/octet-stream"});return this.http.get(`${l.N.apiUrl}reconciliation/downloadTranstionExcel/${t}`,{headers:s,responseType:"blob"})}static#t=this.\u0275fac=function(s){return new(s||T)(Z.LFG(m.eN))};static#e=this.\u0275prov=Z.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"})}return T})()},92849:(M,L,p)=>{p.r(L),p.d(L,{LogisticAutomationModule:()=>pi});var m=p(96814),l=p(6627),a=p(56223),Z=p(78645),x=p(83620),T=p(93997),b=p(64716),t=p(99468),s=p(20553),u=p(69862);let g=(()=>{class i{constructor(e){this.http=e}getRoadFreight(e,n,o){return this.http.get(`${s.N.apiUrl}freight/road/list?page=${e}&contentPerPage=${n}&searchKey=${o}`)}addRoadFreight(e){return this.http.post(`${s.N.apiUrl}freight/road/add`,e)}updateRoadFreight(e,n){return this.http.put(`${s.N.apiUrl}freight/road/update/${n}`,e)}deleteRoadFreight(e){return this.http.delete(`${s.N.apiUrl}freight/road/delete/${e}`)}getAirFreight(){return this.http.get(`${s.N.apiUrl}freight/air/list`)}addAirFreight(e){return this.http.post(`${s.N.apiUrl}freight/air/add`,e)}deleteAirFreight(e){return this.http.delete(`${s.N.apiUrl}freight/air/delete/${e}`)}updateAirFreight(e,n){return this.http.put(`${s.N.apiUrl}freight/air/update/${n}`,e)}getSeaFreight(e,n,o){return this.http.get(`${s.N.apiUrl}freight/sea/list?page=${e}&contentPerPage=${n}&searchKey=${o}`)}addSeaFreight(e){return this.http.post(`${s.N.apiUrl}freight/sea/add`,e)}deleteSeaFreight(e){return this.http.delete(`${s.N.apiUrl}freight/sea/delete/${e}`)}updateSeaFreight(e,n){return this.http.put(`${s.N.apiUrl}freight/sea/update/${n}`,e)}getProductList(e){return this.http.get(`${s.N.apiUrl}product/list?status=${e}`)}getDutiesList(e,n,o,d,c){return this.http.get(`${s.N.apiUrl}duties/list?searchKey=${e}&startDate=${n}&endDate=${o}&page=${d}&contentPerPage=${c}`)}addDuties(e){return this.http.post(`${s.N.apiUrl}duties/add`,e)}updateDuties(e,n){return this.http.put(`${s.N.apiUrl}duties/update/${n}`,e)}deleteDuties(e){return this.http.delete(`${s.N.apiUrl}duties/delete/${e}`)}getTaxesList(e,n,o,d,c){return this.http.get(`${s.N.apiUrl}tax/list?searchKey=${e}&startDate=${n}&endDate=${o}&page=${d}&contentPerPage=${c}`)}addTaxes(e){return this.http.post(`${s.N.apiUrl}tax/add`,e)}updateTaxes(e,n){return this.http.put(`${s.N.apiUrl}tax/update/${n}`,e)}deleteTaxes(e){return this.http.delete(`${s.N.apiUrl}tax/delete/${e}`)}getCbmList(e,n,o,d,c){return this.http.get(`${s.N.apiUrl}cbm/list?searchKey=${e}&startDate=${n}&endDate=${o}&page=${d}&contentPerPage=${c}`)}addCbm(e){return this.http.post(`${s.N.apiUrl}cbm/add`,e)}updateCbm(e,n){return this.http.put(`${s.N.apiUrl}cbm/update/${n}`,e)}deleteCbm(e){return this.http.delete(`${s.N.apiUrl}cbm/delete/${e}`)}getCountryList(){return this.http.get(`${s.N.apiUrl}location/country`)}getStateList(e,n,o){return this.http.get(`${s.N.apiUrl}location/state?page=${e}&contentPerPage=${n}&countryCode=${o}`)}static#t=this.\u0275fac=function(n){return new(n||i)(t.LFG(u.eN))};static#e=this.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var _=p(29917),h=p(57870),C=p(64686);function q(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"div",60)(1,"a",61),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.openModal())}),t._UZ(2,"i",62),t._uU(3," Add Road Freight"),t.qZA()()}}function P(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"a",65),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit,d=t.oxw();return t.KtG(d.openModal(o))}),t._UZ(1,"i",66),t.qZA()}}function k(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"a",65),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit,d=t.oxw();return t.KtG(d.deleteModal(null==o?null:o._id))}),t._UZ(1,"i",67),t.qZA()}}function Y(i,r){if(1&i&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td",63),t.YNc(10,P,2,0,"a",64),t.YNc(11,k,2,0,"a",64),t.qZA()()),2&i){const e=r.$implicit,n=t.oxw();t.xp6(2),t.Oqu(null==e?null:e.roadFreightId),t.xp6(2),t.Oqu(null==e?null:e.fleetType),t.xp6(2),t.Oqu(null==e?null:e.startCityName),t.xp6(2),t.Oqu(null==e?null:e.endCityName),t.xp6(2),t.Q6J("ngIf",n.permission.update),t.xp6(1),t.Q6J("ngIf",n.permission.delete)}}function R(i,r){1&i&&(t.TgZ(0,"h1"),t._uU(1,"Add Road Freight"),t.qZA())}function E(i,r){1&i&&(t.TgZ(0,"h1"),t._uU(1,"Update Road Freight"),t.qZA())}function O(i,r){if(1&i&&(t.TgZ(0,"option",68),t._uU(1),t.qZA()),2&i){const e=r.$implicit;t.Q6J("value",null==e?null:e._id),t.xp6(1),t.hij(" ",null==e?null:e.name,"")}}function K(i,r){1&i&&(t.TgZ(0,"div"),t._uU(1," Origin country is required. "),t.qZA())}function W(i,r){if(1&i&&(t.TgZ(0,"div",69),t.YNc(1,K,2,0,"div",36),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.formControls.startCountryId.errors.required)}}function j(i,r){if(1&i&&(t.TgZ(0,"option",68),t._uU(1),t.qZA()),2&i){const e=r.$implicit;t.Q6J("value",null==e?null:e._id),t.xp6(1),t.hij(" ",null==e?null:e.name,"")}}function V(i,r){1&i&&(t.TgZ(0,"div"),t._uU(1," Origin state is required. "),t.qZA())}function H(i,r){if(1&i&&(t.TgZ(0,"div",69),t.YNc(1,V,2,0,"div",36),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.formControls.startStateId.errors.required)}}function G(i,r){1&i&&(t.TgZ(0,"div"),t._uU(1," Origin city is required. "),t.qZA())}function B(i,r){if(1&i&&(t.TgZ(0,"div",69),t.YNc(1,G,2,0,"div",36),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.formControls.startCityName.errors.required)}}function X(i,r){1&i&&(t.TgZ(0,"div"),t._uU(1," Origin Handling are required. "),t.qZA())}function z(i,r){if(1&i&&(t.TgZ(0,"div",69),t.YNc(1,X,2,0,"div",36),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.formControls.startHandlingCharges.errors.required)}}function tt(i,r){if(1&i&&(t.TgZ(0,"option",68),t._uU(1),t.qZA()),2&i){const e=r.$implicit;t.Q6J("value",null==e?null:e._id),t.xp6(1),t.hij(" ",null==e?null:e.name,"")}}function et(i,r){1&i&&(t.TgZ(0,"div"),t._uU(1," Destination country is required. "),t.qZA())}function it(i,r){if(1&i&&(t.TgZ(0,"div",69),t.YNc(1,et,2,0,"div",36),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.formControls.endCountryId.errors.required)}}function ot(i,r){if(1&i&&(t.TgZ(0,"option",68),t._uU(1),t.qZA()),2&i){const e=r.$implicit;t.Q6J("value",null==e?null:e._id),t.xp6(1),t.hij("",null==e?null:e.name," ")}}function nt(i,r){1&i&&(t.TgZ(0,"div"),t._uU(1," Destination state is required. "),t.qZA())}function st(i,r){if(1&i&&(t.TgZ(0,"div",69),t.YNc(1,nt,2,0,"div",36),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.formControls.endStateId.errors.required)}}function rt(i,r){1&i&&(t.TgZ(0,"div"),t._uU(1," Destination city is required. "),t.qZA())}function at(i,r){if(1&i&&(t.TgZ(0,"div",69),t.YNc(1,rt,2,0,"div",36),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.formControls.endCityName.errors.required)}}function lt(i,r){1&i&&(t.TgZ(0,"div"),t._uU(1," Destination Handling Charges are required. "),t.qZA())}function dt(i,r){if(1&i&&(t.TgZ(0,"div",69),t.YNc(1,lt,2,0,"div",36),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.formControls.endHandlingCharges.errors.required)}}function ct(i,r){if(1&i&&(t.TgZ(0,"option",68),t._uU(1),t.qZA()),2&i){const e=r.$implicit;t.Q6J("value",null==e?null:e.value),t.xp6(1),t.hij(" ",null==e?null:e.label,"")}}function ut(i,r){1&i&&(t.TgZ(0,"div"),t._uU(1," Freight Type is required. "),t.qZA())}function pt(i,r){if(1&i&&(t.TgZ(0,"div",69),t.YNc(1,ut,2,0,"div",36),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.formControls.fleetType.errors.required)}}function mt(i,r){1&i&&(t.TgZ(0,"div"),t._uU(1," Freight Charges are required. "),t.qZA())}function gt(i,r){if(1&i&&(t.TgZ(0,"div",69),t.YNc(1,mt,2,0,"div",36),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.formControls.freightCharges.errors.required)}}function ht(i,r){1&i&&(t.TgZ(0,"div"),t._uU(1," Lead Time in days is required. "),t.qZA())}function _t(i,r){if(1&i&&(t.TgZ(0,"div",69),t.YNc(1,ht,2,0,"div",36),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.formControls.leadTime.errors.required)}}function ft(i,r){1&i&&(t.TgZ(0,"div"),t._uU(1," Lead Time clearance in days is required. "),t.qZA())}function bt(i,r){if(1&i&&(t.TgZ(0,"div",69),t.YNc(1,ft,2,0,"div",36),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.formControls.leadTimeClearance.errors.required)}}const S=function(i){return{"fa-spin fa-spinner":i}};function Ct(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"button",70),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.saveRoadFreight())}),t._UZ(1,"i",29),t._uU(2," Save"),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("disabled",e.isLoadingSubmit),t.xp6(1),t.Q6J("ngClass",t.VKq(2,S,e.isLoadingSubmit))}}function vt(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"button",70),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.editRoadFreight())}),t._UZ(1,"i",29),t._uU(2," Update"),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("disabled",e.isLoadingSubmit),t.xp6(1),t.Q6J("ngClass",t.VKq(2,S,e.isLoadingSubmit))}}const v=function(i){return{"is-invalid":i}};let Tt=(()=>{class i{constructor(e,n,o,d,c,f){this._LS=e,this._FB=n,this.ngxLoaderService=o,this._notifier=d,this._CS=c,this._US=f,this.searchKey="",this.modelChanged=new Z.x,this.submitted=!1,this.isEdit=!1,this.isLoading=!1,this.isLoadingSubmit=!1,this.permissionsArr=[],this.permission={read:!1,add:!1,update:!1,delete:!1},this.page=1,this.contentPerPage=10,this.totalPage=0,this.deleteId=""}ngOnInit(){this._US.getPermissions().subscribe(e=>{this.permissionsArr=e,Object.keys(this.permission).map(n=>{this.canPerformAction("Road Freight",n)})}),this.getConfig(),this.getCountry(),this.inItForm(),this.getData(),this.modelChanged.pipe((0,x.b)(500),(0,T.x)()).subscribe(e=>{this.searchKey=e,this.getData()})}canPerformAction(e,n){this.permission[n]=this._US.hasPermission(e,n,this.permissionsArr)}changeStartCountry(e){this.selectedStartCountry=this.countriesList.find(n=>n?._id===e?.target?.value),this.selectedEndCountry=this.countriesList.find(n=>n?._id===e?.target?.value),this.form.get("endCountryId")?.setValue(e?.target?.value),this.getEndStates(),this.getStartStates()}changeEndCountry(e){this.selectedEndCountry=this.countriesList.find(n=>n?._id===e?.target?.value),this.getEndStates()}getStartStates(){this.ngxLoaderService.start(),this._LS.getStateList(1,150,this.selectedStartCountry?.isoCode).pipe((0,b.x)(()=>{this.ngxLoaderService.stop()})).subscribe(e=>{e.meta.status?this.startstatesList=e.data:(this.startstatesList=[],this._notifier.showWarning(e.meta.msg,""))})}getEndStates(){this.ngxLoaderService.start(),this._LS.getStateList(1,150,this.selectedEndCountry?.isoCode).pipe((0,b.x)(()=>{this.ngxLoaderService.stop()})).subscribe(e=>{e.meta.status?this.endstatesList=e.data:(this.endstatesList=[],this._notifier.showWarning(e.meta.msg,""))})}inItForm(){this.form=this._FB.group({startCountryId:["",a.kI.required],startStateId:["",a.kI.required],startCityName:["",a.kI.required],startHandlingCharges:["",a.kI.required],endCountryId:[{value:"",disabled:!0},a.kI.required],endStateId:["",a.kI.required],endCityName:["",a.kI.required],endHandlingCharges:["",a.kI.required],fleetType:["",a.kI.required],freightCharges:["",a.kI.required],leadTime:["",a.kI.required],leadTimeClearance:["",a.kI.required]})}get formControls(){return this.form.controls}getCountry(){this.ngxLoaderService.start(),this._LS.getCountryList().pipe((0,b.x)(()=>{this.ngxLoaderService.stop()})).subscribe(e=>{e.meta.status?this.countriesList=e.data:(this.countriesList=[],this._notifier.showWarning(e.meta.msg,""))})}getConfig(){this.ngxLoaderService.start(),this._CS.getAppConfigByKey("ROAD_FLEET").pipe((0,b.x)(()=>{this.ngxLoaderService.stop()})).subscribe(e=>{e.meta.status?this.configList=e.data.value.split("|").map(n=>({value:(n=n.trim()).toLowerCase(),label:n})):(this.configList=[],this._notifier.showWarning(e.meta.msg,""))})}onScrollDown(e){this.page<this.totalPage&&(this.page+=1,this.getData(!0))}getData(e){this.ngxLoaderService.start(),this._LS.getRoadFreight(this.page,this.contentPerPage,this.searchKey).subscribe(n=>{this.ngxLoaderService.stop(),n.meta.status?(this.totalPage=this.totalPage?this.totalPage:Math.ceil(n.metadata[0].total/this.contentPerPage),this.data=e?[...this.data,...n.data]:n.data):(this.data=e?this.data:[],e||this._notifier.showWarning(n.meta.msg,""))},n=>{this.ngxLoaderService.stop(),this._notifier.showWarning("Something went wrong","Error")})}openModal(e){this.submitted=!1,e&&e._id?(this.isEdit=!0,this.details=e,this.selectedStartCountry=e?.startCountry,this.getStartStates(),this.selectedEndCountry=e?.endCountry,this.getEndStates(),this.form.patchValue(e)):this.isEdit=!1,$("#addNotificationModal").modal("show"),$("#addNotificationModal").on("hidden.bs.modal",n=>{this.form.reset({startCountryId:"",endCountryId:"",endStateId:"",startStateId:"",fleetType:""})})}saveRoadFreight(){this.form.valid?(this.isLoadingSubmit=!0,this._LS.addRoadFreight(this.form.getRawValue()).pipe((0,b.x)(()=>{this.isLoadingSubmit=!1})).subscribe(e=>{e.meta.status?($("#addNotificationModal").modal("hide"),this.getData(),this._notifier.showSuccess(e.meta.msg,"Success")):this._notifier.showWarning(e.meta.msg,"")})):this.submitted=!0}editRoadFreight(){this.form.valid?(this.isLoadingSubmit=!0,this._LS.updateRoadFreight(this.form.getRawValue(),this.details?._id).pipe((0,b.x)(()=>{this.isLoadingSubmit=!1})).subscribe(e=>{e.meta.status?($("#addNotificationModal").modal("hide"),this.getData(),this._notifier.showSuccess(e.meta.msg,"Success")):this._notifier.showWarning(e.meta.msg,"")})):this.submitted=!0}deleteModal(e){$("#deleteDutiesModal").modal("show"),this.deleteId=e}deleteFreight(){this.isLoading=!0,this._LS.deleteRoadFreight(this.deleteId).pipe((0,b.x)(()=>{this.isLoading=!1})).subscribe(e=>{e.meta.status?($("#deleteDutiesModal").modal("hide"),this.getData(),this._notifier.showSuccess(e.meta.msg,"Success")):this._notifier.showWarning(e.meta.msg,"")})}closeModal(){$("#addNotificationModal").modal("hide")}changed(e){this.modelChanged.next(e)}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(g),t.Y36(a.qu),t.Y36(_.LA),t.Y36(h.lG),t.Y36(h.v_),t.Y36(h.KD))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-road-freight"]],decls:159,vars:68,consts:[[1,"dashboardMain"],[1,"page-header"],[1,"account_dashboard","profile_dashboard"],[1,"login-white-box"],[1,"row","justify-content-between","listFilter"],[1,"col-12","col-sm-8","col-md-9","col-lg-9"],[1,"row"],[1,"col-12","col-md-3","col-sm-6","col-lg-3"],[1,"form-group"],[1,"input-group"],["type","text","placeholder","Search","aria-label","Search","aria-describedby","basic-addon2",1,"form-control","border-0",3,"ngModel","ngModelChange"],[1,"input-group-append"],["type","button",1,"btn","searchBtn"],[1,"fa","fa-search"],["class","col-12 col-sm-4 col-md-3 col-lg-3 text-end",4,"ngIf"],["infiniteScroll","",1,"table-responsive","request_sample","fix-headertbl",3,"infiniteScrollDistance","infiniteScrollThrottle","scrollWindow","scrolled"],["width","100%","cellspacing","0",1,"table","table-bordered"],[4,"ngFor","ngForOf"],["id","deleteDutiesModal","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content","feedback-popup"],[1,"modal-header","justify-content-center"],[1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"form-box","form-box-dashboard"],[1,"p-3"],[1,"title","text-center","mb-5"],["type","button",1,"btn","btn-block","btn-lg","btn-success","btn-sumbit",3,"disabled","click"],[1,"fa",3,"ngClass"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn","btn-block","btn-lg","btn-outline-success","btn-sumbit"],["id","addNotificationModal",1,"modal","fade"],[1,"modal-dialog","modal-lg","sample-popup-form"],[1,"modal-content"],[1,"form-box"],[1,"d-flex","justify-content-between","mb-3"],[4,"ngIf"],["type","button","href","javascript:void(0)",1,"btn-close",3,"click"],[3,"formGroup"],[1,"col-12","col-sm-12","col-md-6","col-lg-6"],["formControlName","startCountryId",1,"form-control","form-ctrl",3,"ngClass","change"],["value",""],[3,"value",4,"ngFor","ngForOf"],["class","invalid-feedback",4,"ngIf"],["formControlName","startStateId",1,"form-control","form-ctrl",3,"ngClass"],["placeholder","Origin City Name","formControlName","startCityName",1,"form-control","form-ctrl",3,"ngClass"],["type","number","placeholder","Origin Handling Charges","formControlName","startHandlingCharges",1,"form-control","form-ctrl",3,"ngClass"],[1,"mb-3"],["formControlName","endCountryId",1,"form-control","form-ctrl",3,"ngClass","change"],["formControlName","endStateId",1,"form-control","form-ctrl",3,"ngClass"],["placeholder","Destination City Name","formControlName","endCityName",1,"form-control","form-ctrl",3,"ngClass"],["type","number","placeholder","Destination Handling Charges","formControlName","endHandlingCharges",1,"form-control","form-ctrl",3,"ngClass"],["formControlName","fleetType",1,"form-control","form-ctrl",3,"ngClass"],["value","","hidden",""],["type","number","placeholder","Freight Charges","formControlName","freightCharges",1,"form-control","form-ctrl",3,"ngClass"],["type","number","placeholder","Lead Time in days","formControlName","leadTime",1,"form-control","form-ctrl",3,"ngClass"],["type","number","placeholder","Lead Time Clearance in days","formControlName","leadTimeClearance",1,"form-control","form-ctrl",3,"ngClass"],[1,"text-end","main_btn","mt-3"],["href","javascript:void(0)",1,"btn","btn-light","me-3",3,"click"],["class","btn btn-success",3,"disabled","click",4,"ngIf"],[1,"col-12","col-sm-4","col-md-3","col-lg-3","text-end"],["href","javascript:void(0)",1,"btn","btn-success","btn-block",3,"click"],[1,"bi","bi-plus-lg"],[1,"text-end"],["href","javascript:void(0)","class","text-success underline-none viewText mr-1",3,"click",4,"ngIf"],["href","javascript:void(0)",1,"text-success","underline-none","viewText","mr-1",3,"click"],[1,"fa","fa-pencil"],[1,"fa","fa-trash-o"],[3,"value"],[1,"invalid-feedback"],[1,"btn","btn-success",3,"disabled","click"]],template:function(n,o){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h3"),t._uU(3,"Road Freight"),t.qZA()(),t.TgZ(4,"div",2)(5,"div",3)(6,"div",4)(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8)(11,"div",9)(12,"input",10),t.NdJ("ngModelChange",function(c){return o.searchKey=c})("ngModelChange",function(c){return o.changed(c)}),t.qZA(),t.TgZ(13,"div",11)(14,"button",12),t._UZ(15,"i",13),t.qZA()()()()()()(),t.YNc(16,q,4,0,"div",14),t.qZA(),t.TgZ(17,"div",15),t.NdJ("scrolled",function(c){return o.onScrollDown(c)}),t.TgZ(18,"table",16)(19,"thead")(20,"tr")(21,"th"),t._uU(22,"Road Freigh ID"),t.qZA(),t.TgZ(23,"th"),t._uU(24,"Fleet Type"),t.qZA(),t.TgZ(25,"th"),t._uU(26,"Origin City"),t.qZA(),t.TgZ(27,"th"),t._uU(28,"Destination City"),t.qZA(),t.TgZ(29,"th"),t._uU(30,"\xa0"),t.qZA()()(),t.TgZ(31,"tbody"),t.YNc(32,Y,12,6,"tr",17),t.qZA()()()()()(),t.TgZ(33,"div",18)(34,"div",19)(35,"div",20)(36,"div",21)(37,"h5",22),t._uU(38,"Delete Road Freight"),t.qZA(),t._UZ(39,"button",23),t.qZA(),t.TgZ(40,"div",24)(41,"div",25)(42,"div",26)(43,"div",27)(44,"h4"),t._uU(45,"Are you sure you want to "),t._UZ(46,"br"),t._uU(47,"delete the Road Freight?"),t.qZA()(),t.TgZ(48,"div",8)(49,"button",28),t.NdJ("click",function(){return o.deleteFreight()}),t._UZ(50,"i",29),t._uU(51," Yes"),t.qZA()(),t.TgZ(52,"div",8)(53,"button",30),t._uU(54,"No"),t.qZA()()()()()()()(),t.TgZ(55,"div",31)(56,"div",32)(57,"div",33)(58,"div",24)(59,"div",34)(60,"div",35),t.YNc(61,R,2,0,"h1",36),t.YNc(62,E,2,0,"h1",36),t.TgZ(63,"button",37),t.NdJ("click",function(){return o.closeModal()}),t.qZA()(),t.TgZ(64,"form",38)(65,"div",6)(66,"div",39)(67,"div",8)(68,"label"),t._uU(69,"Origin Country"),t.qZA(),t.TgZ(70,"select",40),t.NdJ("change",function(c){return o.changeStartCountry(c)}),t.TgZ(71,"option",41),t._uU(72,"Select Country"),t.qZA(),t.YNc(73,O,2,2,"option",42),t.qZA(),t.YNc(74,W,2,1,"div",43),t.qZA()(),t.TgZ(75,"div",39)(76,"div",8)(77,"label"),t._uU(78,"Origin State"),t.qZA(),t.TgZ(79,"select",44)(80,"option",41),t._uU(81,"Select State"),t.qZA(),t.YNc(82,j,2,2,"option",42),t.qZA(),t.YNc(83,H,2,1,"div",43),t.qZA()(),t.TgZ(84,"div",39)(85,"div",8)(86,"label"),t._uU(87,"Origin City Name"),t.qZA(),t._UZ(88,"input",45),t.YNc(89,B,2,1,"div",43),t.qZA()(),t.TgZ(90,"div",39)(91,"div",8)(92,"label"),t._uU(93,"Origin Handling Charges"),t.qZA(),t._UZ(94,"input",46),t.YNc(95,z,2,1,"div",43),t.qZA()(),t._UZ(96,"hr",47),t.TgZ(97,"div",39)(98,"div",8)(99,"label"),t._uU(100,"Destination Country"),t.qZA(),t.TgZ(101,"select",48),t.NdJ("change",function(c){return o.changeEndCountry(c)}),t.TgZ(102,"option",41),t._uU(103,"Select Country"),t.qZA(),t.YNc(104,tt,2,2,"option",42),t.qZA(),t.YNc(105,it,2,1,"div",43),t.qZA()(),t.TgZ(106,"div",39)(107,"div",8)(108,"label"),t._uU(109,"Destination State"),t.qZA(),t.TgZ(110,"select",49)(111,"option",41),t._uU(112,"Select State"),t.qZA(),t.YNc(113,ot,2,2,"option",42),t.qZA(),t.YNc(114,st,2,1,"div",43),t.qZA()(),t.TgZ(115,"div",39)(116,"div",8)(117,"label"),t._uU(118,"Destination City Name"),t.qZA(),t._UZ(119,"input",50),t.YNc(120,at,2,1,"div",43),t.qZA()(),t.TgZ(121,"div",39)(122,"div",8)(123,"label"),t._uU(124,"Destination Handling Charges"),t.qZA(),t._UZ(125,"input",51),t.YNc(126,dt,2,1,"div",43),t.qZA()(),t.TgZ(127,"div",39)(128,"div",8)(129,"label"),t._uU(130,"Freight Type"),t.qZA(),t.TgZ(131,"select",52)(132,"option",53),t._uU(133,"Select"),t.qZA(),t.YNc(134,ct,2,2,"option",42),t.qZA(),t.YNc(135,pt,2,1,"div",43),t.qZA()(),t.TgZ(136,"div",39)(137,"div",8)(138,"label"),t._uU(139,"Freight Charges"),t.qZA(),t._UZ(140,"input",54),t.YNc(141,gt,2,1,"div",43),t.qZA()(),t.TgZ(142,"div",39)(143,"div",8)(144,"label"),t._uU(145,"Lead Time in days"),t.qZA(),t._UZ(146,"input",55),t.YNc(147,_t,2,1,"div",43),t.qZA()(),t.TgZ(148,"div",39)(149,"div",8)(150,"label"),t._uU(151,"Lead Time Clearance in days"),t.qZA(),t._UZ(152,"input",56),t.YNc(153,bt,2,1,"div",43),t.qZA()(),t.TgZ(154,"div",57)(155,"a",58),t.NdJ("click",function(){return o.closeModal()}),t._uU(156,"Cancel"),t.qZA(),t.YNc(157,Ct,3,4,"button",59),t.YNc(158,vt,3,4,"button",59),t.qZA()()()()()()()()),2&n&&(t.xp6(12),t.Q6J("ngModel",o.searchKey),t.xp6(4),t.Q6J("ngIf",o.permission.add),t.xp6(1),t.Q6J("infiniteScrollDistance",1)("infiniteScrollThrottle",300)("scrollWindow",!1),t.xp6(15),t.Q6J("ngForOf",o.data),t.xp6(17),t.Q6J("disabled",o.isLoading),t.xp6(1),t.Q6J("ngClass",t.VKq(42,S,o.isLoading)),t.xp6(11),t.Q6J("ngIf",!o.isEdit),t.xp6(1),t.Q6J("ngIf",o.isEdit),t.xp6(2),t.Q6J("formGroup",o.form),t.xp6(6),t.Q6J("ngClass",t.VKq(44,v,o.submitted&&o.formControls.startCountryId.errors)),t.xp6(3),t.Q6J("ngForOf",o.countriesList),t.xp6(1),t.Q6J("ngIf",o.submitted&&o.formControls.startCountryId.errors),t.xp6(5),t.Q6J("ngClass",t.VKq(46,v,o.submitted&&o.formControls.startStateId.errors)),t.xp6(3),t.Q6J("ngForOf",o.startstatesList),t.xp6(1),t.Q6J("ngIf",o.submitted&&o.formControls.startStateId.errors),t.xp6(5),t.Q6J("ngClass",t.VKq(48,v,o.submitted&&o.formControls.startCityName.errors)),t.xp6(1),t.Q6J("ngIf",o.submitted&&o.formControls.startCityName.errors),t.xp6(5),t.Q6J("ngClass",t.VKq(50,v,o.submitted&&o.formControls.startHandlingCharges.errors)),t.xp6(1),t.Q6J("ngIf",o.submitted&&o.formControls.startHandlingCharges.errors),t.xp6(6),t.Q6J("ngClass",t.VKq(52,v,o.submitted&&o.formControls.endCountryId.errors)),t.xp6(3),t.Q6J("ngForOf",o.countriesList),t.xp6(1),t.Q6J("ngIf",o.submitted&&o.formControls.endCountryId.errors),t.xp6(5),t.Q6J("ngClass",t.VKq(54,v,o.submitted&&o.formControls.endStateId.errors)),t.xp6(3),t.Q6J("ngForOf",o.endstatesList),t.xp6(1),t.Q6J("ngIf",o.submitted&&o.formControls.endStateId.errors),t.xp6(5),t.Q6J("ngClass",t.VKq(56,v,o.submitted&&o.formControls.endCityName.errors)),t.xp6(1),t.Q6J("ngIf",o.submitted&&o.formControls.endCityName.errors),t.xp6(5),t.Q6J("ngClass",t.VKq(58,v,o.submitted&&o.formControls.endHandlingCharges.errors)),t.xp6(1),t.Q6J("ngIf",o.submitted&&o.formControls.endHandlingCharges.errors),t.xp6(5),t.Q6J("ngClass",t.VKq(60,v,o.submitted&&o.formControls.fleetType.errors)),t.xp6(3),t.Q6J("ngForOf",o.configList),t.xp6(1),t.Q6J("ngIf",o.submitted&&o.formControls.fleetType.errors),t.xp6(5),t.Q6J("ngClass",t.VKq(62,v,o.submitted&&o.formControls.freightCharges.errors)),t.xp6(1),t.Q6J("ngIf",o.submitted&&o.formControls.freightCharges.errors),t.xp6(5),t.Q6J("ngClass",t.VKq(64,v,o.submitted&&o.formControls.leadTime.errors)),t.xp6(1),t.Q6J("ngIf",o.submitted&&o.formControls.leadTime.errors),t.xp6(5),t.Q6J("ngClass",t.VKq(66,v,o.submitted&&o.formControls.leadTimeClearance.errors)),t.xp6(1),t.Q6J("ngIf",o.submitted&&o.formControls.leadTimeClearance.errors),t.xp6(4),t.Q6J("ngIf",!o.isEdit),t.xp6(1),t.Q6J("ngIf",o.isEdit))},dependencies:[m.mk,m.sg,m.O5,a._Y,a.YN,a.Kr,a.Fj,a.wV,a.EJ,a.JJ,a.JL,a.sg,a.u,a.On,C.Ry]})}return i})();function Zt(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"div",53)(1,"a",54),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.openModal())}),t._UZ(2,"i",55),t._uU(3," Add Sea Freight"),t.qZA()()}}function xt(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"a",58),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit,d=t.oxw();return t.KtG(d.openModal(o))}),t._UZ(1,"i",59),t.qZA()}}function qt(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"a",58),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit,d=t.oxw();return t.KtG(d.deleteModal(null==o?null:o._id))}),t._UZ(1,"i",60),t.qZA()}}function At(i,r){if(1&i&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td",56),t.YNc(10,xt,2,0,"a",57),t.YNc(11,qt,2,0,"a",57),t.qZA()()),2&i){const e=r.$implicit,n=t.oxw();t.xp6(2),t.Oqu(null==e?null:e.seaFreightId),t.xp6(2),t.Oqu(null==e?null:e.fleetType),t.xp6(2),t.Oqu(null==e?null:e.startPortName),t.xp6(2),t.Oqu(null==e?null:e.endPortName),t.xp6(2),t.Q6J("ngIf",n.permission.update),t.xp6(1),t.Q6J("ngIf",n.permission.delete)}}function Ut(i,r){1&i&&(t.TgZ(0,"h1"),t._uU(1,"Add Sea Freight"),t.qZA())}function yt(i,r){1&i&&(t.TgZ(0,"h1"),t._uU(1,"Update Sea Freight"),t.qZA())}function Nt(i,r){if(1&i&&(t.TgZ(0,"option",61),t._uU(1),t.qZA()),2&i){const e=r.$implicit;t.Q6J("value",null==e?null:e.value),t.xp6(1),t.hij("",null==e?null:e.label," ")}}function Lt(i,r){1&i&&(t.TgZ(0,"div"),t._uU(1," Origin Seaport is required. "),t.qZA())}function St(i,r){if(1&i&&(t.TgZ(0,"div",62),t.YNc(1,Lt,2,0,"div",36),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.formControls.startPortName.errors.required)}}function Ft(i,r){1&i&&(t.TgZ(0,"div"),t._uU(1," Origin Handling are required. "),t.qZA())}function It(i,r){if(1&i&&(t.TgZ(0,"div",62),t.YNc(1,Ft,2,0,"div",36),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.formControls.startHandlingCharges.errors.required)}}function Jt(i,r){if(1&i&&(t.TgZ(0,"option",61),t._uU(1),t.qZA()),2&i){const e=r.$implicit;t.Q6J("value",null==e?null:e.value),t.xp6(1),t.hij("",null==e?null:e.label," ")}}function wt(i,r){1&i&&(t.TgZ(0,"div"),t._uU(1," Destination Seaport is required. "),t.qZA())}function $t(i,r){if(1&i&&(t.TgZ(0,"div",62),t.YNc(1,wt,2,0,"div",36),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.formControls.endPortName.errors.required)}}function Dt(i,r){1&i&&(t.TgZ(0,"div"),t._uU(1," Destination Handling Charges are required. "),t.qZA())}function Qt(i,r){if(1&i&&(t.TgZ(0,"div",62),t.YNc(1,Dt,2,0,"div",36),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.formControls.endHandlingCharges.errors.required)}}function Mt(i,r){if(1&i&&(t.TgZ(0,"option",61),t._uU(1),t.qZA()),2&i){const e=r.$implicit;t.Q6J("value",null==e?null:e.value),t.xp6(1),t.hij(" ",null==e?null:e.label,"")}}function Pt(i,r){1&i&&(t.TgZ(0,"div"),t._uU(1," Freight Type is required. "),t.qZA())}function kt(i,r){if(1&i&&(t.TgZ(0,"div",62),t.YNc(1,Pt,2,0,"div",36),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.formControls.fleetType.errors.required)}}function Yt(i,r){1&i&&(t.TgZ(0,"div"),t._uU(1," Freight Charges are required. "),t.qZA())}function Rt(i,r){if(1&i&&(t.TgZ(0,"div",62),t.YNc(1,Yt,2,0,"div",36),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.formControls.freightCharges.errors.required)}}function Et(i,r){1&i&&(t.TgZ(0,"div"),t._uU(1," Lead Time is required. "),t.qZA())}function Ot(i,r){if(1&i&&(t.TgZ(0,"div",62),t.YNc(1,Et,2,0,"div",36),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.formControls.leadTime.errors.required)}}const F=function(i){return{"fa-spin fa-spinner":i}};function Kt(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"button",63),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.saveRoadFreight())}),t._UZ(1,"i",29),t._uU(2," Save"),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("disabled",e.isLoadingSubmit),t.xp6(1),t.Q6J("ngClass",t.VKq(2,F,e.isLoadingSubmit))}}function Wt(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"button",63),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.editRoadFreight())}),t._UZ(1,"i",29),t._uU(2," Update"),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("disabled",e.isLoadingSubmit),t.xp6(1),t.Q6J("ngClass",t.VKq(2,F,e.isLoadingSubmit))}}const A=function(i){return{"is-invalid":i}};let jt=(()=>{class i{constructor(e,n,o,d,c,f){this._LS=e,this._FB=n,this.ngxLoaderService=o,this._notifier=d,this._CS=c,this._US=f,this.searchKey="",this.modelChanged=new Z.x,this.submitted=!1,this.isEdit=!1,this.isLoading=!1,this.isLoadingSubmit=!1,this.permissionsArr=[],this.permission={read:!1,add:!1,update:!1,delete:!1},this.page=1,this.contentPerPage=10,this.totalPage=0,this.deleteId=""}ngOnInit(){this._US.getPermissions().subscribe(e=>{this.permissionsArr=e,Object.keys(this.permission).map(n=>{this.canPerformAction("Sea Freight",n)})}),this.getConfig(),this.inItForm(),this.getData(),this.getPort(),this.modelChanged.pipe((0,x.b)(500),(0,T.x)()).subscribe(e=>{this.searchKey=e,this.getData()})}inItForm(){this.form=this._FB.group({startPortName:["",a.kI.required],endPortName:["",a.kI.required],startHandlingCharges:["",a.kI.required],endHandlingCharges:["",a.kI.required],fleetType:["",a.kI.required],freightCharges:["",a.kI.required],leadTime:["",a.kI.required]})}get formControls(){return this.form.controls}getFormGroup(e){return e}canPerformAction(e,n){this.permission[n]=this._US.hasPermission(e,n,this.permissionsArr)}getConfig(){this.ngxLoaderService.start(),this._CS.getAppConfigByKey("SEA_FLEET").pipe((0,b.x)(()=>{this.ngxLoaderService.stop()})).subscribe(e=>{e.meta.status?this.configList=e.data.value.split("|").map(n=>({value:(n=n.trim()).toLowerCase(),label:n})):(this.configList=[],this._notifier.showWarning(e.meta.msg,""))})}getPort(){this.ngxLoaderService.start(),this._CS.getAppConfigByKey("MAPPED_PORT").pipe((0,b.x)(()=>{this.ngxLoaderService.stop()})).subscribe(e=>{e.meta.status?this.ports=e.data.value.split("|").map(n=>({value:(n=n.trim()).toLowerCase(),label:n})):(this.ports=[],this._notifier.showWarning(e.meta.msg,""))})}onScrollDown(e){this.page<this.totalPage&&(this.page+=1,this.getData(!0))}getData(e){this.ngxLoaderService.start(),this._LS.getSeaFreight(this.page,this.contentPerPage,this.searchKey).subscribe(n=>{this.ngxLoaderService.stop(),n.meta.status?(this.totalPage=this.totalPage?this.totalPage:Math.ceil(n.metadata[0].total/this.contentPerPage),this.data=e?[...this.data,...n.data]:n.data):(this.data=e?this.data:[],e||this._notifier.showWarning(n.meta.msg,""))},n=>{this.ngxLoaderService.stop(),this._notifier.showWarning("Something went wrong","Error")})}openModal(e){this.submitted=!1,e&&e._id?(this.isEdit=!0,this.details=e,this.form.patchValue(e)):this.isEdit=!1,$("#addNotificationModal").modal("show"),$("#addNotificationModal").on("hidden.bs.modal",n=>{this.form.reset({startPortName:"",endPortName:"",fleetType:""})})}deleteModal(e){$("#deleteDutiesModal").modal("show"),this.deleteId=e}deleteFreight(){this.isLoading=!0,this._LS.deleteSeaFreight(this.deleteId).pipe((0,b.x)(()=>{this.isLoading=!1})).subscribe(e=>{e.meta.status?($("#deleteDutiesModal").modal("hide"),this.getData(),this._notifier.showSuccess(e.meta.msg,"Success")):this._notifier.showWarning(e.meta.msg,"")})}saveRoadFreight(){this.form.valid?(this.isLoadingSubmit=!0,this._LS.addSeaFreight(this.form.value).pipe((0,b.x)(()=>{this.isLoadingSubmit=!1})).subscribe(e=>{e.meta.status?($("#addNotificationModal").modal("hide"),this.getData()):this._notifier.showWarning(e.meta.msg,"Error")})):this.submitted=!0}editRoadFreight(){this.form.valid?(this.isLoadingSubmit=!0,this._LS.updateSeaFreight(this.form.value,this.details?._id).pipe((0,b.x)(()=>{this.isLoadingSubmit=!1})).subscribe(e=>{e.meta.status?($("#addNotificationModal").modal("hide"),this.getData(),this._notifier.showSuccess(e.meta.msg,"Success")):this._notifier.showWarning(e.meta.msg,"")})):this.submitted=!0}closeModal(){$("#addNotificationModal").modal("hide")}changed(e){this.modelChanged.next(e)}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(g),t.Y36(a.qu),t.Y36(_.LA),t.Y36(h.lG),t.Y36(h.v_),t.Y36(h.KD))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-sea-freight"]],decls:122,vars:46,consts:[[1,"dashboardMain"],[1,"page-header"],[1,"account_dashboard","profile_dashboard"],[1,"login-white-box"],[1,"row","justify-content-between","listFilter"],[1,"col-12","col-sm-8","col-md-10","col-lg-10"],[1,"row"],[1,"col-12","col-md-3","col-sm-6","col-lg-3"],[1,"form-group"],[1,"input-group"],["type","text","placeholder","Search","aria-label","Search","aria-describedby","basic-addon2",1,"form-control","border-0",3,"ngModel","ngModelChange"],[1,"input-group-append"],["type","button",1,"btn","searchBtn"],[1,"fa","fa-search"],["class","col-12 col-sm-4 col-md-2 col-lg-2 text-end",4,"ngIf"],["infiniteScroll","",1,"table-responsive","request_sample","fix-headertbl",3,"infiniteScrollDistance","infiniteScrollThrottle","scrollWindow","scrolled"],["width","100%","cellspacing","0",1,"table","table-bordered"],[4,"ngFor","ngForOf"],["id","deleteDutiesModal","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content","feedback-popup"],[1,"modal-header","justify-content-center"],[1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"form-box","form-box-dashboard"],[1,"p-3"],[1,"title","text-center","mb-5"],["type","button",1,"btn","btn-block","btn-lg","btn-success","btn-sumbit",3,"disabled","click"],[1,"fa",3,"ngClass"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn","btn-block","btn-lg","btn-outline-success","btn-sumbit"],["id","addNotificationModal",1,"modal","fade"],[1,"modal-dialog","modal-lg","sample-popup-form"],[1,"modal-content"],[1,"form-box"],[1,"d-flex","justify-content-between","mb-3"],[4,"ngIf"],["type","button","href","javascript:void(0)",1,"btn-close",3,"click"],[3,"formGroup"],[1,"col-12","col-sm-12","col-md-6","col-lg-6"],["formControlName","startPortName",1,"form-control","form-ctrl",3,"ngClass"],["value","","hidden",""],[3,"value",4,"ngFor","ngForOf"],["class","invalid-feedback",4,"ngIf"],["type","number","placeholder","Origin Handling Charges","formControlName","startHandlingCharges",1,"form-control","form-ctrl",3,"ngClass"],["formControlName","endPortName",1,"form-control","form-ctrl",3,"ngClass"],["type","number","placeholder","Destination Handling Charges","formControlName","endHandlingCharges",1,"form-control","form-ctrl",3,"ngClass"],["formControlName","fleetType",1,"form-control","form-ctrl",3,"ngClass"],["type","number","placeholder","Freight Charges","formControlName","freightCharges",1,"form-control","form-ctrl",3,"ngClass"],["type","number","placeholder","Lead Time","formControlName","leadTime",1,"form-control","form-ctrl",3,"ngClass"],[1,"text-end","main_btn","mt-3"],["href","javascript:void(0)",1,"btn","btn-light","me-3",3,"click"],["class","btn btn-success",3,"disabled","click",4,"ngIf"],[1,"col-12","col-sm-4","col-md-2","col-lg-2","text-end"],["href","javascript:void(0)",1,"btn","btn-success","btn-block",3,"click"],[1,"bi","bi-plus-lg"],[1,"text-end"],["href","javascript:void(0)","class","text-success underline-none viewText mr-1",3,"click",4,"ngIf"],["href","javascript:void(0)",1,"text-success","underline-none","viewText","mr-1",3,"click"],[1,"fa","fa-pencil"],[1,"fa","fa-trash-o"],[3,"value"],[1,"invalid-feedback"],[1,"btn","btn-success",3,"disabled","click"]],template:function(n,o){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h3"),t._uU(3,"Sea Freight"),t.qZA()(),t.TgZ(4,"div",2)(5,"div",3)(6,"div",4)(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8)(11,"div",9)(12,"input",10),t.NdJ("ngModelChange",function(c){return o.searchKey=c})("ngModelChange",function(c){return o.changed(c)}),t.qZA(),t.TgZ(13,"div",11)(14,"button",12),t._UZ(15,"i",13),t.qZA()()()()()()(),t.YNc(16,Zt,4,0,"div",14),t.qZA(),t.TgZ(17,"div",15),t.NdJ("scrolled",function(c){return o.onScrollDown(c)}),t.TgZ(18,"table",16)(19,"thead")(20,"tr")(21,"th"),t._uU(22,"Sea Freight ID"),t.qZA(),t.TgZ(23,"th"),t._uU(24,"Fleet Type"),t.qZA(),t.TgZ(25,"th"),t._uU(26,"Origin Seaport"),t.qZA(),t.TgZ(27,"th"),t._uU(28,"Destination Seaport"),t.qZA(),t.TgZ(29,"th"),t._uU(30,"\xa0"),t.qZA()()(),t.TgZ(31,"tbody"),t.YNc(32,At,12,6,"tr",17),t.qZA()()()()()(),t.TgZ(33,"div",18)(34,"div",19)(35,"div",20)(36,"div",21)(37,"h5",22),t._uU(38,"Delete Sea Freight"),t.qZA(),t._UZ(39,"button",23),t.qZA(),t.TgZ(40,"div",24)(41,"div",25)(42,"div",26)(43,"div",27)(44,"h4"),t._uU(45,"Are you sure you want to "),t._UZ(46,"br"),t._uU(47,"delete the Sea Freight?"),t.qZA()(),t.TgZ(48,"div",8)(49,"button",28),t.NdJ("click",function(){return o.deleteFreight()}),t._UZ(50,"i",29),t._uU(51," Yes"),t.qZA()(),t.TgZ(52,"div",8)(53,"button",30),t._uU(54,"No"),t.qZA()()()()()()()(),t.TgZ(55,"div",31)(56,"div",32)(57,"div",33)(58,"div",24)(59,"div",34)(60,"div",35),t.YNc(61,Ut,2,0,"h1",36),t.YNc(62,yt,2,0,"h1",36),t.TgZ(63,"button",37),t.NdJ("click",function(){return o.closeModal()}),t.qZA()(),t.TgZ(64,"form",38)(65,"div",6)(66,"div",39)(67,"div",8)(68,"label"),t._uU(69,"Origin Seaport Name"),t.qZA(),t.TgZ(70,"select",40)(71,"option",41),t._uU(72,"Select"),t.qZA(),t.YNc(73,Nt,2,2,"option",42),t.qZA(),t.YNc(74,St,2,1,"div",43),t.qZA()(),t.TgZ(75,"div",39)(76,"div",8)(77,"label"),t._uU(78,"Origin Handling Charges"),t.qZA(),t._UZ(79,"input",44),t.YNc(80,It,2,1,"div",43),t.qZA()(),t.TgZ(81,"div",39)(82,"div",8)(83,"label"),t._uU(84,"Destination Seaport Name"),t.qZA(),t.TgZ(85,"select",45)(86,"option",41),t._uU(87,"Select"),t.qZA(),t.YNc(88,Jt,2,2,"option",42),t.qZA(),t.YNc(89,$t,2,1,"div",43),t.qZA()(),t.TgZ(90,"div",39)(91,"div",8)(92,"label"),t._uU(93,"Destination Handling Charges"),t.qZA(),t._UZ(94,"input",46),t.YNc(95,Qt,2,1,"div",43),t.qZA()(),t.TgZ(96,"div",39)(97,"div",8)(98,"label"),t._uU(99,"Freight Type"),t.qZA(),t.TgZ(100,"select",47)(101,"option",41),t._uU(102,"Select"),t.qZA(),t.YNc(103,Mt,2,2,"option",42),t.qZA(),t.YNc(104,kt,2,1,"div",43),t.qZA()(),t.TgZ(105,"div",39)(106,"div",8)(107,"label"),t._uU(108,"Freight Charges"),t.qZA(),t._UZ(109,"input",48),t.YNc(110,Rt,2,1,"div",43),t.qZA()(),t.TgZ(111,"div",39)(112,"div",8)(113,"label"),t._uU(114,"Lead Time"),t.qZA(),t._UZ(115,"input",49),t.YNc(116,Ot,2,1,"div",43),t.qZA()(),t.TgZ(117,"div",50)(118,"a",51),t.NdJ("click",function(){return o.closeModal()}),t._uU(119,"Cancel"),t.qZA(),t.YNc(120,Kt,3,4,"button",52),t.YNc(121,Wt,3,4,"button",52),t.qZA()()()()()()()()),2&n&&(t.xp6(12),t.Q6J("ngModel",o.searchKey),t.xp6(4),t.Q6J("ngIf",o.permission.add),t.xp6(1),t.Q6J("infiniteScrollDistance",1)("infiniteScrollThrottle",300)("scrollWindow",!1),t.xp6(15),t.Q6J("ngForOf",o.data),t.xp6(17),t.Q6J("disabled",o.isLoading),t.xp6(1),t.Q6J("ngClass",t.VKq(30,F,o.isLoading)),t.xp6(11),t.Q6J("ngIf",!o.isEdit),t.xp6(1),t.Q6J("ngIf",o.isEdit),t.xp6(2),t.Q6J("formGroup",o.form),t.xp6(6),t.Q6J("ngClass",t.VKq(32,A,o.submitted&&o.formControls.startPortName.errors)),t.xp6(3),t.Q6J("ngForOf",o.ports),t.xp6(1),t.Q6J("ngIf",o.submitted&&o.formControls.startPortName.errors),t.xp6(5),t.Q6J("ngClass",t.VKq(34,A,o.submitted&&o.formControls.startHandlingCharges.errors)),t.xp6(1),t.Q6J("ngIf",o.submitted&&o.formControls.startHandlingCharges.errors),t.xp6(5),t.Q6J("ngClass",t.VKq(36,A,o.submitted&&o.formControls.endPortName.errors)),t.xp6(3),t.Q6J("ngForOf",o.ports),t.xp6(1),t.Q6J("ngIf",o.submitted&&o.formControls.endPortName.errors),t.xp6(5),t.Q6J("ngClass",t.VKq(38,A,o.submitted&&o.formControls.endHandlingCharges.errors)),t.xp6(1),t.Q6J("ngIf",o.submitted&&o.formControls.endHandlingCharges.errors),t.xp6(5),t.Q6J("ngClass",t.VKq(40,A,o.submitted&&o.formControls.fleetType.errors)),t.xp6(3),t.Q6J("ngForOf",o.configList),t.xp6(1),t.Q6J("ngIf",o.submitted&&o.formControls.fleetType.errors),t.xp6(5),t.Q6J("ngClass",t.VKq(42,A,o.submitted&&o.formControls.freightCharges.errors)),t.xp6(1),t.Q6J("ngIf",o.submitted&&o.formControls.freightCharges.errors),t.xp6(5),t.Q6J("ngClass",t.VKq(44,A,o.submitted&&o.formControls.leadTime.errors)),t.xp6(1),t.Q6J("ngIf",o.submitted&&o.formControls.leadTime.errors),t.xp6(4),t.Q6J("ngIf",!o.isEdit),t.xp6(1),t.Q6J("ngIf",o.isEdit))},dependencies:[m.mk,m.sg,m.O5,a._Y,a.YN,a.Kr,a.Fj,a.wV,a.EJ,a.JJ,a.JL,a.sg,a.u,a.On,C.Ry]})}return i})();var U=p(16676),I=p(45824);function Vt(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"div",53)(1,"a",54),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.showDutiesModal())}),t._UZ(2,"i",55),t._uU(3," Add Duties "),t.qZA()()}}function Ht(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"a",60),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit,d=t.oxw(2);return t.KtG(d.showDutiesModal(o))}),t._UZ(1,"i",61),t.qZA()}}function Gt(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"a",60),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit,d=t.oxw(2);return t.KtG(d.showConfirmModal(o))}),t._UZ(1,"i",62),t.qZA()}}function Bt(i,r){if(1&i&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td",58),t.YNc(14,Ht,2,0,"a",59),t.YNc(15,Gt,2,0,"a",59),t.qZA()()),2&i){const e=r.$implicit,n=t.oxw(2);t.xp6(2),t.Oqu(e.dutiesId),t.xp6(2),t.Oqu((null==e||null==e.product?null:e.product.productName)||"-"),t.xp6(2),t.Oqu(e.hsn),t.xp6(2),t.Oqu(e.startCountry.name),t.xp6(2),t.Oqu(e.endCountry.name),t.xp6(2),t.Oqu(e.duty),t.xp6(2),t.Q6J("ngIf",n.dutiesPermission.update),t.xp6(1),t.Q6J("ngIf",n.dutiesPermission.delete)}}function Xt(i,r){if(1&i&&(t.TgZ(0,"table",56)(1,"thead")(2,"tr")(3,"th"),t._uU(4,"Duty ID"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Product Name"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"HSN"),t.qZA(),t.TgZ(9,"th"),t._uU(10,"Origin Country"),t.qZA(),t.TgZ(11,"th"),t._uU(12,"Destination Country"),t.qZA(),t.TgZ(13,"th"),t._uU(14,"Duty %"),t.qZA(),t.TgZ(15,"th"),t._uU(16,"\xa0"),t.qZA()()(),t.TgZ(17,"tbody"),t.YNc(18,Bt,16,8,"tr",57),t.qZA()()),2&i){const e=t.oxw();t.xp6(18),t.Q6J("ngForOf",e.dutiesList)}}function zt(i,r){1&i&&(t.TgZ(0,"div",63),t._uU(1,"No Data Found"),t.qZA())}function te(i,r){1&i&&(t.TgZ(0,"h1"),t._uU(1,"Add Duty"),t.qZA())}function ee(i,r){1&i&&(t.TgZ(0,"h1"),t._uU(1,"Update Duties"),t.qZA())}function ie(i,r){if(1&i&&(t.TgZ(0,"option",64),t._uU(1),t.qZA()),2&i){const e=r.$implicit;t.s9C("value",e._id),t.xp6(1),t.hij("",e.productName," ")}}function oe(i,r){1&i&&(t.TgZ(0,"div"),t._uU(1," Product is required. "),t.qZA())}function ne(i,r){if(1&i&&(t.TgZ(0,"div",65),t.YNc(1,oe,2,0,"div",29),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.dutiesFormControls.productId.errors.required)}}function se(i,r){1&i&&(t.TgZ(0,"div"),t._uU(1," HSN is required. "),t.qZA())}function re(i,r){if(1&i&&(t.TgZ(0,"div",65),t.YNc(1,se,2,0,"div",29),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.dutiesFormControls.hsn.errors.required)}}function ae(i,r){if(1&i&&(t.TgZ(0,"option",64),t._uU(1),t.qZA()),2&i){const e=r.$implicit;t.s9C("value",e._id),t.xp6(1),t.hij("",e.name," ")}}function le(i,r){1&i&&(t.TgZ(0,"div"),t._uU(1," Origin country is required. "),t.qZA())}function de(i,r){if(1&i&&(t.TgZ(0,"div",65),t.YNc(1,le,2,0,"div",29),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.dutiesFormControls.startCountryId.errors.required)}}function ce(i,r){if(1&i&&(t.TgZ(0,"option",64),t._uU(1),t.qZA()),2&i){const e=r.$implicit;t.s9C("value",e._id),t.xp6(1),t.hij("",e.name," ")}}function ue(i,r){1&i&&(t.TgZ(0,"div"),t._uU(1," Destination country is required. "),t.qZA())}function pe(i,r){if(1&i&&(t.TgZ(0,"div",65),t.YNc(1,ue,2,0,"div",29),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.dutiesFormControls.endCountryId.errors.required)}}function me(i,r){1&i&&(t.TgZ(0,"div"),t._uU(1," Duty is required. "),t.qZA())}function ge(i,r){if(1&i&&(t.TgZ(0,"div",65),t.YNc(1,me,2,0,"div",29),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.dutiesFormControls.duty.errors.required)}}const J=function(i){return{"fa-spin fa-spinner":i}};function he(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"button",66),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.addDuties())}),t._UZ(1,"i",51),t._uU(2," Save "),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("disabled",e.isLoading),t.xp6(1),t.Q6J("ngClass",t.VKq(2,J,e.isLoading))}}function _e(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"button",66),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.updateDuties())}),t._UZ(1,"i",51),t._uU(2," Update"),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("disabled",e.isLoading),t.xp6(1),t.Q6J("ngClass",t.VKq(2,J,e.isLoading))}}const N=function(i){return{"is-invalid":i}};let fe=(()=>{class i{constructor(e,n,o,d,c){this._FB=e,this._notifier=n,this._LS=o,this.ngxLoaderService=d,this._US=c,this.dutiesList=[],this.submitted=!1,this.isLoading=!1,this.searchKey="",this.modelChanged=new Z.x,this.permissionsArr=[],this.dutiesPermission={read:!1,add:!1,update:!1,delete:!1},this.page=1,this.contentPerPage=10,this.totalPage=0,this.productList=[],this.countryList=[],this.isEdit=!1,this.deleteDutiesId=""}ngOnInit(){this._US.getPermissions().subscribe(e=>{this.permissionsArr=e,Object.keys(this.dutiesPermission).map(n=>{this.canPerformAction("Duties",n)})}),this.getProductList(),this.getCountryList(),this.initAddDutiesForm(),this.modelChanged.pipe((0,x.b)(500),(0,T.x)()).subscribe(e=>{this.searchKey=e,this.getDutiesList()}),this.getDutiesList()}ngAfterViewInit(){setTimeout(()=>{this.initDateRangePicker()},200)}initAddDutiesForm(){this.dutiesForm=this._FB.group({productId:["",a.kI.required],hsn:["",a.kI.required],startCountryId:["",a.kI.required],endCountryId:["",a.kI.required],duty:["",a.kI.required]})}get dutiesFormControls(){return this.dutiesForm.controls}initDateRangePicker(){$(".dateRangePickerDuties").dateRangePicker({format:"DD-MM-YYYY",autoClose:!0}).on("datepicker-change",(e,n)=>{console.log("change",n),this.startDate=U(n.date1).valueOf(),this.endDate=U(n.date2).valueOf(),this.getDutiesList()})}openCalendar(e){e.stopPropagation(),$(".dateRangePickerDuties").data("dateRangePicker").open()}onScrollDown(e){this.page<this.totalPage&&(this.page+=1,this.getDutiesList(!0))}getDutiesList(e){this.ngxLoaderService.start(),this._LS.getDutiesList(this.searchKey,this.startDate,this.endDate,this.page,this.contentPerPage).subscribe(n=>{this.ngxLoaderService.stop(),n.meta.status?(this.totalPage=this.totalPage?this.totalPage:Math.ceil(n.metadata[0].total/this.contentPerPage),this.dutiesList=e?[...this.dutiesList,...n.data]:n.data):(this.dutiesList=e?this.dutiesList:[],e||this._notifier.showWarning(n.meta.msg,""))},n=>{this.ngxLoaderService.stop()})}changed(e){this.modelChanged.next(e)}getProductList(){this._LS.getProductList("ACTIVE").subscribe(e=>{e.meta.status?this.productList=e.data:(this.productList=[],this._notifier.showWarning(e.meta.msg,""))},e=>{this.ngxLoaderService.stop()})}getCountryList(){this._LS.getCountryList().subscribe(e=>{e.meta.status?this.countryList=e.data:(this.countryList=[],this._notifier.showWarning(e.meta.msg,""))},e=>{this.ngxLoaderService.stop()})}showDutiesModal(e){e&&e._id&&(this.isEdit=!0,this.dutiesData=e,this.dutiesForm.patchValue(this.dutiesData)),$("#addDutiesModal").modal("show"),$("#addDutiesModal").on("hidden.bs.modal",n=>{this.isEdit=!1,this.submitted=!1,this.dutiesData=void 0,this.dutiesForm.reset({categoryId:""})})}hideDutiesModal(){$("#addDutiesModal").modal("hide")}addDuties(){this.dutiesForm.valid?(this.isLoading=!0,this._LS.addDuties(this.dutiesForm.value).subscribe(e=>{this.isLoading=!1,e.meta.status?(this.getDutiesList(),this.hideDutiesModal(),this._notifier.showSuccess(e.meta.msg,"Success")):this._notifier.showWarning(e.meta.msg,"")},e=>{this.isLoading=!1,this._notifier.showError("Something Went Wrong","Error")})):this.submitted=!0}updateDuties(){this.dutiesForm.valid?(this.isLoading=!0,this._LS.updateDuties(this.dutiesForm.value,this.dutiesData._id).subscribe(e=>{this.isLoading=!1,e.meta.status?(this.getDutiesList(),this.hideDutiesModal(),this._notifier.showSuccess(e.meta.msg,"Success")):this._notifier.showWarning(e.meta.msg,"")},e=>{this.isLoading=!1,this._notifier.showError("Something Went Wrong","Error")})):this.submitted=!0}showConfirmModal(e){e&&e._id&&(this.deleteDutiesId=e._id),$("#deleteDutiesModal").modal("show"),$("#deleteDutiesModal").on("hidden.bs.modal",n=>{this.deleteDutiesId=""})}hideConfirmModal(){$("#deleteDutiesModal").modal("hide")}deleteDuties(){this.deleteDutiesId&&(this.isLoading=!0,this._LS.deleteDuties(this.deleteDutiesId).subscribe(e=>{e.meta.status?(this.hideConfirmModal(),this.getDutiesList(),this._notifier.showSuccess(e.meta.msg,"Success"),this.isLoading=!1):(this.isLoading=!1,this._notifier.showWarning(e.meta.msg,""))},e=>{this.isLoading=!1,this._notifier.showError("Something went wrong","Error")}))}canPerformAction(e,n){this.dutiesPermission[n]=this._US.hasPermission(e,n,this.permissionsArr)}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(a.qu),t.Y36(I.l),t.Y36(g),t.Y36(_.LA),t.Y36(h.KD))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-duties"]],decls:98,vars:39,consts:[[1,"dashboardMain"],[1,"page-header"],[1,"account_dashboard","profile_dashboard"],[1,"login-white-box"],[1,"row","justify-content-between","listFilter"],[1,"col-12","col-sm-8","col-md-10","col-lg-10"],[1,"row"],[1,"col-12","col-md-3","col-sm-6","col-lg-3"],[1,"form-group"],[1,"input-group"],["type","text","placeholder","Search","aria-label","Search","aria-describedby","basic-addon2","name","searchKey",1,"form-control","border-0",3,"ngModel","ngModelChange"],[1,"input-group-append"],["type","button",1,"btn","searchBtn"],[1,"fa","fa-search"],[1,"col-12","col-md-4","col-lg-4","col-sm-6"],[1,"form-group","calendarInput"],["type","text","placeholder","EX: 12/02/2023  -  12/02/2023",1,"form-control","dateRangePickerDuties"],[1,"formIconsinner",3,"click"],[1,"bi","bi-calendar-week"],["class","col-12 col-sm-4 col-md-2 col-lg-2 text-end",4,"ngIf"],["infiniteScroll","",1,"table-responsive","request_sample","fix-headertbl",3,"infiniteScrollDistance","infiniteScrollThrottle","scrollWindow","scrolled"],["class","table table-bordered","width","100%","cellspacing","0",4,"ngIf"],["style","text-align: center;padding: 140px;",4,"ngIf"],["id","addDutiesModal",1,"modal","fade"],[1,"modal-dialog","modal-lg","sample-popup-form"],[1,"modal-content"],[1,"modal-body"],[1,"form-box",3,"formGroup"],[1,"d-flex","justify-content-between","mb-3"],[4,"ngIf"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],["formControlName","productId",1,"form-control","form-ctrl",3,"ngClass"],["value",""],[3,"value",4,"ngFor","ngForOf"],["class","invalid-feedback",4,"ngIf"],["type","text","placeholder","Enter HSN","formControlName","hsn",1,"form-control","form-ctrl",3,"ngClass"],["formControlName","startCountryId",1,"form-control","form-ctrl",3,"ngClass"],["formControlName","endCountryId",1,"form-control","form-ctrl",3,"ngClass"],["type","number","placeholder","Enter duty","formControlName","duty",1,"form-control","form-ctrl",3,"ngClass"],[1,"text-end","main_btn","mt-3"],["href","javascript:void(0)","data-bs-dismiss","modal",1,"btn","btn-light","me-3"],["href","javascript:void(0)","class","btn btn-success",3,"disabled","click",4,"ngIf"],["id","deleteDutiesModal","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content","feedback-popup"],[1,"modal-header","justify-content-center"],[1,"modal-title"],[1,"form-box","form-box-dashboard"],[1,"p-3"],[1,"title","text-center","mb-5"],["type","button",1,"btn","btn-block","btn-lg","btn-success","btn-sumbit",3,"disabled","click"],[1,"fa",3,"ngClass"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn","btn-block","btn-lg","btn-outline-success","btn-sumbit"],[1,"col-12","col-sm-4","col-md-2","col-lg-2","text-end"],["href","javascript:void(0)",1,"btn","btn-success","btn-block",3,"click"],[1,"bi","bi-plus-lg"],["width","100%","cellspacing","0",1,"table","table-bordered"],[4,"ngFor","ngForOf"],[1,"text-end"],["href","javascript:void(0)","class","text-success underline-none viewText mr-1",3,"click",4,"ngIf"],["href","javascript:void(0)",1,"text-success","underline-none","viewText","mr-1",3,"click"],[1,"fa","fa-pencil"],[1,"fa","fa-trash-o"],[2,"text-align","center","padding","140px"],[3,"value"],[1,"invalid-feedback"],["href","javascript:void(0)",1,"btn","btn-success",3,"disabled","click"]],template:function(n,o){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h3"),t._uU(3,"Duties"),t.qZA()(),t.TgZ(4,"div",2)(5,"div",3)(6,"div",4)(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8)(11,"div",9)(12,"input",10),t.NdJ("ngModelChange",function(c){return o.searchKey=c})("ngModelChange",function(c){return o.changed(c)}),t.qZA(),t.TgZ(13,"div",11)(14,"button",12),t._UZ(15,"i",13),t.qZA()()()()(),t.TgZ(16,"div",14)(17,"div",15),t._UZ(18,"input",16),t.TgZ(19,"span",17),t.NdJ("click",function(c){return o.openCalendar(c)}),t._UZ(20,"i",18),t.qZA()()()()(),t.YNc(21,Vt,4,0,"div",19),t.qZA(),t.TgZ(22,"div",20),t.NdJ("scrolled",function(c){return o.onScrollDown(c)}),t.YNc(23,Xt,19,1,"table",21),t.YNc(24,zt,2,0,"div",22),t.qZA()()()(),t.TgZ(25,"div",23)(26,"div",24)(27,"div",25)(28,"div",26)(29,"div",27)(30,"div",28),t.YNc(31,te,2,0,"h1",29),t.YNc(32,ee,2,0,"h1",29),t._UZ(33,"button",30),t.qZA(),t.TgZ(34,"div",8)(35,"label"),t._uU(36,"Select Product"),t.qZA(),t.TgZ(37,"select",31)(38,"option",32),t._uU(39,"Product "),t.qZA(),t._UZ(40,"option"),t.YNc(41,ie,2,2,"option",33),t.qZA(),t.YNc(42,ne,2,1,"div",34),t.qZA(),t.TgZ(43,"div",8)(44,"label"),t._uU(45,"HSN"),t.qZA(),t._UZ(46,"input",35),t.YNc(47,re,2,1,"div",34),t.qZA(),t.TgZ(48,"div",8)(49,"label"),t._uU(50,"Select Origin Country"),t.qZA(),t.TgZ(51,"select",36)(52,"option",32),t._uU(53,"Origin Country "),t.qZA(),t._UZ(54,"option"),t.YNc(55,ae,2,2,"option",33),t.qZA(),t.YNc(56,de,2,1,"div",34),t.qZA(),t.TgZ(57,"div",8)(58,"label"),t._uU(59,"Select Destination Country"),t.qZA(),t.TgZ(60,"select",37)(61,"option",32),t._uU(62,"Destination Country "),t.qZA(),t._UZ(63,"option"),t.YNc(64,ce,2,2,"option",33),t.qZA(),t.YNc(65,pe,2,1,"div",34),t.qZA(),t.TgZ(66,"div",8)(67,"label"),t._uU(68,"Duty %"),t.qZA(),t._UZ(69,"input",38),t.YNc(70,ge,2,1,"div",34),t.qZA(),t.TgZ(71,"div",39)(72,"a",40),t._uU(73,"Cancel"),t.qZA(),t.YNc(74,he,3,4,"button",41),t.YNc(75,_e,3,4,"button",41),t.qZA()()()()()(),t.TgZ(76,"div",42)(77,"div",43)(78,"div",44)(79,"div",45)(80,"h5",46),t._uU(81,"Delete Duty"),t.qZA(),t._UZ(82,"button",30),t.qZA(),t.TgZ(83,"div",26)(84,"div",47)(85,"div",48)(86,"div",49)(87,"h4"),t._uU(88,"Are you sure you want to "),t._UZ(89,"br"),t._uU(90,"delete the Duty?"),t.qZA()(),t.TgZ(91,"div",8)(92,"button",50),t.NdJ("click",function(){return o.deleteDuties()}),t._UZ(93,"i",51),t._uU(94," Yes"),t.qZA()(),t.TgZ(95,"div",8)(96,"button",52),t._uU(97,"No"),t.qZA()()()()()()()()),2&n&&(t.xp6(12),t.Q6J("ngModel",o.searchKey),t.xp6(9),t.Q6J("ngIf",o.dutiesPermission.add),t.xp6(1),t.Q6J("infiniteScrollDistance",1)("infiniteScrollThrottle",300)("scrollWindow",!1),t.xp6(1),t.Q6J("ngIf",o.dutiesList.length),t.xp6(1),t.Q6J("ngIf",!o.dutiesList.length),t.xp6(5),t.Q6J("formGroup",o.dutiesForm),t.xp6(2),t.Q6J("ngIf",!o.isEdit),t.xp6(1),t.Q6J("ngIf",o.isEdit),t.xp6(5),t.Q6J("ngClass",t.VKq(27,N,o.submitted&&o.dutiesFormControls.productId.errors)),t.xp6(4),t.Q6J("ngForOf",o.productList),t.xp6(1),t.Q6J("ngIf",o.submitted&&o.dutiesFormControls.productId.errors),t.xp6(4),t.Q6J("ngClass",t.VKq(29,N,o.submitted&&o.dutiesFormControls.hsn.errors)),t.xp6(1),t.Q6J("ngIf",o.submitted&&o.dutiesFormControls.hsn.errors),t.xp6(4),t.Q6J("ngClass",t.VKq(31,N,o.submitted&&o.dutiesFormControls.startCountryId.errors)),t.xp6(4),t.Q6J("ngForOf",o.countryList),t.xp6(1),t.Q6J("ngIf",o.submitted&&o.dutiesFormControls.startCountryId.errors),t.xp6(4),t.Q6J("ngClass",t.VKq(33,N,o.submitted&&o.dutiesFormControls.endCountryId.errors)),t.xp6(4),t.Q6J("ngForOf",o.countryList),t.xp6(1),t.Q6J("ngIf",o.submitted&&o.dutiesFormControls.endCountryId.errors),t.xp6(4),t.Q6J("ngClass",t.VKq(35,N,o.submitted&&o.dutiesFormControls.duty.errors)),t.xp6(1),t.Q6J("ngIf",o.submitted&&o.dutiesFormControls.duty.errors),t.xp6(4),t.Q6J("ngIf",!o.isEdit),t.xp6(1),t.Q6J("ngIf",o.isEdit),t.xp6(17),t.Q6J("disabled",o.isLoading),t.xp6(1),t.Q6J("ngClass",t.VKq(37,J,o.isLoading)))},dependencies:[m.mk,m.sg,m.O5,a.YN,a.Kr,a.Fj,a.wV,a.EJ,a.JJ,a.JL,a.sg,a.u,a.On,C.Ry]})}return i})();var be=p(50412);function Ce(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"div",54)(1,"a",55),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.showTaxesModal())}),t._UZ(2,"i",56),t._uU(3," Add Taxes "),t.qZA()()}}function ve(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"a",61),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit,d=t.oxw(2);return t.KtG(d.showTaxesModal(o))}),t._UZ(1,"i",62),t.qZA()}}function Te(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"a",61),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit,d=t.oxw(2);return t.KtG(d.showConfirmModal(o))}),t._UZ(1,"i",63),t.qZA()}}function Ze(i,r){if(1&i&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.qZA(),t.TgZ(15,"td",59),t.YNc(16,ve,2,0,"a",60),t.YNc(17,Te,2,0,"a",60),t.qZA()()),2&i){const e=r.$implicit,n=t.oxw(2);t.xp6(2),t.Oqu(e.taxId),t.xp6(2),t.Oqu((null==e||null==e.product?null:e.product.productName)||"-"),t.xp6(2),t.Oqu(e.hsn),t.xp6(2),t.Oqu(e.startCountry.name),t.xp6(2),t.Oqu(e.endCountry.name),t.xp6(2),t.Oqu(e.endState.name),t.xp6(2),t.Oqu(e.tax),t.xp6(2),t.Q6J("ngIf",n.taxesPermission.update),t.xp6(1),t.Q6J("ngIf",n.taxesPermission.delete)}}function xe(i,r){if(1&i&&(t.TgZ(0,"table",57)(1,"thead")(2,"tr")(3,"th"),t._uU(4,"Tax ID"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Product Name"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"HSN"),t.qZA(),t.TgZ(9,"th"),t._uU(10,"Origin Country"),t.qZA(),t.TgZ(11,"th"),t._uU(12,"Destination Country"),t.qZA(),t.TgZ(13,"th"),t._uU(14,"Destination State"),t.qZA(),t.TgZ(15,"th"),t._uU(16,"Tax %"),t.qZA(),t.TgZ(17,"th"),t._uU(18,"\xa0"),t.qZA()()(),t.TgZ(19,"tbody"),t.YNc(20,Ze,18,9,"tr",58),t.qZA()()),2&i){const e=t.oxw();t.xp6(20),t.Q6J("ngForOf",e.taxesList)}}function qe(i,r){1&i&&(t.TgZ(0,"div",64),t._uU(1,"No Data Found"),t.qZA())}function Ae(i,r){1&i&&(t.TgZ(0,"h1"),t._uU(1,"Add Taxes"),t.qZA())}function Ue(i,r){1&i&&(t.TgZ(0,"h1"),t._uU(1,"Update Taxes"),t.qZA())}function ye(i,r){if(1&i&&(t.TgZ(0,"option",65),t._uU(1),t.qZA()),2&i){const e=r.$implicit;t.s9C("value",e._id),t.xp6(1),t.hij("",e.productName," ")}}function Ne(i,r){1&i&&(t.TgZ(0,"div"),t._uU(1," Product is required. "),t.qZA())}function Le(i,r){if(1&i&&(t.TgZ(0,"div",66),t.YNc(1,Ne,2,0,"div",29),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.taxesFormControls.productId.errors.required)}}function Se(i,r){1&i&&(t.TgZ(0,"div"),t._uU(1," HSN is required. "),t.qZA())}function Fe(i,r){if(1&i&&(t.TgZ(0,"div",66),t.YNc(1,Se,2,0,"div",29),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.taxesFormControls.hsn.errors.required)}}function Ie(i,r){if(1&i&&(t.TgZ(0,"option",65),t._uU(1),t.qZA()),2&i){const e=r.$implicit;t.s9C("value",e._id),t.xp6(1),t.hij("",e.name," ")}}function Je(i,r){1&i&&(t.TgZ(0,"div"),t._uU(1," Origin country is required. "),t.qZA())}function we(i,r){if(1&i&&(t.TgZ(0,"div",66),t.YNc(1,Je,2,0,"div",29),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.taxesFormControls.startCountryId.errors.required)}}function $e(i,r){if(1&i&&(t.TgZ(0,"option",65),t._uU(1),t.qZA()),2&i){const e=r.$implicit;t.s9C("value",e._id),t.xp6(1),t.hij("",e.name," ")}}function De(i,r){1&i&&(t.TgZ(0,"div"),t._uU(1," Destination country is required. "),t.qZA())}function Qe(i,r){if(1&i&&(t.TgZ(0,"div",66),t.YNc(1,De,2,0,"div",29),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.taxesFormControls.endCountryId.errors.required)}}function Me(i,r){if(1&i&&(t.TgZ(0,"option",65),t._uU(1),t.qZA()),2&i){const e=r.$implicit;t.s9C("value",e._id),t.xp6(1),t.hij("",e.name," ")}}function Pe(i,r){1&i&&(t.TgZ(0,"div"),t._uU(1," Destination state is required. "),t.qZA())}function ke(i,r){if(1&i&&(t.TgZ(0,"div",66),t.YNc(1,Pe,2,0,"div",29),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.taxesFormControls.endStateId.errors.required)}}function Ye(i,r){1&i&&(t.TgZ(0,"div"),t._uU(1," Tax is required. "),t.qZA())}function Re(i,r){if(1&i&&(t.TgZ(0,"div",66),t.YNc(1,Ye,2,0,"div",29),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.taxesFormControls.tax.errors.required)}}const w=function(i){return{"fa-spin fa-spinner":i}};function Ee(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"button",67),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.addTaxes())}),t._UZ(1,"i",52),t._uU(2," Save "),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("disabled",e.isLoading),t.xp6(1),t.Q6J("ngClass",t.VKq(2,w,e.isLoading))}}function Oe(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"button",67),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.updateTaxes())}),t._UZ(1,"i",52),t._uU(2," Update"),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("disabled",e.isLoading),t.xp6(1),t.Q6J("ngClass",t.VKq(2,w,e.isLoading))}}const y=function(i){return{"is-invalid":i}};function We(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"div",51)(1,"a",52),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.showCbmModal())}),t._UZ(2,"i",53),t._uU(3," Add CBM Range "),t.qZA()()}}function je(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"a",58),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit,d=t.oxw(2);return t.KtG(d.showCbmModal(o))}),t._UZ(1,"i",59),t.qZA()}}function Ve(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"a",58),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit,d=t.oxw(2);return t.KtG(d.showConfirmModal(o))}),t._UZ(1,"i",60),t.qZA()}}function He(i,r){if(1&i&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td",56),t.YNc(10,je,2,0,"a",57),t.YNc(11,Ve,2,0,"a",57),t.qZA()()),2&i){const e=r.$implicit,n=t.oxw(2);t.xp6(2),t.Oqu(e.cbmId),t.xp6(2),t.Oqu(e.transportType),t.xp6(2),t.Oqu(e.fleetType),t.xp6(2),t.Oqu(e.cbmRange),t.xp6(2),t.Q6J("ngIf",n.cbmPermission.update),t.xp6(1),t.Q6J("ngIf",n.cbmPermission.delete)}}function Ge(i,r){if(1&i&&(t.TgZ(0,"table",54)(1,"thead")(2,"tr")(3,"th"),t._uU(4,"CBM ID"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Transport Type"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"Fleet Type"),t.qZA(),t.TgZ(9,"th"),t._uU(10,"CBM Range"),t.qZA(),t.TgZ(11,"th"),t._uU(12,"\xa0"),t.qZA()()(),t.TgZ(13,"tbody"),t.YNc(14,He,12,6,"tr",55),t.qZA()()),2&i){const e=t.oxw();t.xp6(14),t.Q6J("ngForOf",e.cbmList)}}function Be(i,r){1&i&&(t.TgZ(0,"div",61),t._uU(1,"No Data Found"),t.qZA())}function Xe(i,r){1&i&&(t.TgZ(0,"h1"),t._uU(1,"Add CBM Range"),t.qZA())}function ze(i,r){1&i&&(t.TgZ(0,"h1"),t._uU(1,"Update CBM Range"),t.qZA())}function ti(i,r){if(1&i&&(t.TgZ(0,"option",62),t._uU(1),t.qZA()),2&i){const e=r.$implicit;t.s9C("value",e.value),t.xp6(1),t.hij(" ",e.label," ")}}function ei(i,r){1&i&&(t.TgZ(0,"div"),t._uU(1," Transport Type is required. "),t.qZA())}function ii(i,r){if(1&i&&(t.TgZ(0,"div",63),t.YNc(1,ei,2,0,"div",29),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.cbmFormControls.transportType.errors.required)}}function oi(i,r){if(1&i&&(t.TgZ(0,"option",62),t._uU(1),t.qZA()),2&i){const e=r.$implicit;t.s9C("value",e.value),t.xp6(1),t.hij(" ",e.label," ")}}function ni(i,r){1&i&&(t.TgZ(0,"div"),t._uU(1," fleetType Type is required. "),t.qZA())}function si(i,r){if(1&i&&(t.TgZ(0,"div",63),t.YNc(1,ni,2,0,"div",29),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.cbmFormControls.fleetType.errors.required)}}function ri(i,r){1&i&&(t.TgZ(0,"div"),t._uU(1," CBM Range is required. "),t.qZA())}function ai(i,r){if(1&i&&(t.TgZ(0,"div",63),t.YNc(1,ri,2,0,"div",29),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.cbmFormControls.cbmRange.errors.required)}}const D=function(i){return{"fa-spin fa-spinner":i}};function li(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"button",64),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.addCbm())}),t._UZ(1,"i",49),t._uU(2," Save "),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("disabled",e.isLoading),t.xp6(1),t.Q6J("ngClass",t.VKq(2,D,e.isLoading))}}function di(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"button",64),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.updateCbm())}),t._UZ(1,"i",49),t._uU(2," Update"),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("disabled",e.isLoading),t.xp6(1),t.Q6J("ngClass",t.VKq(2,D,e.isLoading))}}const Q=function(i){return{"is-invalid":i}},ci=[{path:"road-freight",data:{module:"Road Freight",permission:"read"},component:Tt},{path:"sea-freight",data:{module:"Sea Freight",permission:"read"},component:jt},{path:"duties",data:{module:"Duties",permission:"read"},component:fe},{path:"taxes",data:{module:"Taxes",permission:"read"},component:(()=>{class i{constructor(e,n,o,d,c,f){this._FB=e,this._notifier=n,this._LS=o,this.ngxLoaderService=d,this._US=c,this._CS=f,this.taxesList=[],this.submitted=!1,this.isLoading=!1,this.searchKey="",this.modelChanged=new Z.x,this.permissionsArr=[],this.taxesPermission={read:!1,add:!1,update:!1,delete:!1},this.page=1,this.contentPerPage=10,this.totalPage=0,this.productList=[],this.countryList=[],this.stateList=[],this.isEdit=!1,this.deleteTaxesId=""}ngOnInit(){this._US.getPermissions().subscribe(e=>{this.permissionsArr=e,Object.keys(this.taxesPermission).map(n=>{this.canPerformAction("Taxes",n)})}),this.getProductList(),this.getCountryList(),this.initAddTaxesForm(),this.modelChanged.pipe((0,x.b)(500),(0,T.x)()).subscribe(e=>{this.searchKey=e,this.getTaxesList()}),this.getTaxesList()}ngAfterViewInit(){setTimeout(()=>{this.initDateRangePicker()},200)}initAddTaxesForm(){this.taxesForm=this._FB.group({productId:["",a.kI.required],hsn:["",a.kI.required],startCountryId:["",a.kI.required],endCountryId:["",a.kI.required],endStateId:["",a.kI.required],tax:["",a.kI.required]})}get taxesFormControls(){return this.taxesForm.controls}initDateRangePicker(){$(".dateRangePickerTaxes").dateRangePicker({format:"DD-MM-YYYY",autoClose:!0}).on("datepicker-change",(e,n)=>{console.log("change",n),this.startDate=U(n.date1).valueOf(),this.endDate=U(n.date2).valueOf(),this.getTaxesList()})}openCalendar(e){e.stopPropagation(),$(".dateRangePickerTaxes").data("dateRangePicker").open()}onScrollDown(e){this.page<this.totalPage&&(this.page+=1,this.getTaxesList(!0))}getTaxesList(e){this.ngxLoaderService.start(),this._LS.getTaxesList(this.searchKey,this.startDate,this.endDate,this.page,this.contentPerPage).subscribe(n=>{this.ngxLoaderService.stop(),n.meta.status?(this.totalPage=this.totalPage?this.totalPage:Math.ceil(n.metadata[0].total/this.contentPerPage),this.taxesList=e?[...this.taxesList,...n.data]:n.data):(this.taxesList=e?this.taxesList:[],e||this._notifier.showWarning(n.meta.msg,""))},n=>{this.ngxLoaderService.stop()})}changed(e){this.modelChanged.next(e)}getProductList(){this._LS.getProductList("ACTIVE").subscribe(e=>{e.meta.status?this.productList=e.data:(this.productList=[],this._notifier.showWarning(e.meta.msg,""))},e=>{this.ngxLoaderService.stop()})}getCountryList(){this._LS.getCountryList().subscribe(e=>{e.meta.status?this.countryList=e.data:(this.countryList=[],this._notifier.showWarning(e.meta.msg,""))},e=>{this.ngxLoaderService.stop()})}getStateList(e){this.selectedCountry=this.countryList.find(n=>n._id===e.target.value),this._CS.getStateList(1,150,this.selectedCountry.isoCode).subscribe(n=>{n.meta.status?this.stateList=n.data:this._notifier.showWarning(n.meta.msg,"")},n=>{this._notifier.showError("Something Went Wrong","Error")})}showTaxesModal(e){e&&e._id&&(this.isEdit=!0,this.taxesData=e,this.taxesForm.patchValue(this.taxesData)),$("#addTaxesModal").modal("show"),$("#addTaxesModal").on("hidden.bs.modal",n=>{this.isEdit=!1,this.submitted=!1,this.taxesData=void 0,this.taxesForm.reset({categoryId:""})})}hideTaxesModal(){$("#addTaxesModal").modal("hide")}addTaxes(){this.taxesForm.valid?(this.isLoading=!0,this._LS.addTaxes(this.taxesForm.value).subscribe(e=>{this.isLoading=!1,e.meta.status?(this.getTaxesList(),this.hideTaxesModal(),this._notifier.showSuccess(e.meta.msg,"Success")):this._notifier.showWarning(e.meta.msg,"")},e=>{this.isLoading=!1,this._notifier.showError("Something Went Wrong","Error")})):this.submitted=!0}updateTaxes(){this.taxesForm.valid?(this.isLoading=!0,this._LS.updateTaxes(this.taxesForm.value,this.taxesData._id).subscribe(e=>{this.isLoading=!1,e.meta.status?(this.getTaxesList(),this.hideTaxesModal(),this._notifier.showSuccess(e.meta.msg,"Success")):this._notifier.showWarning(e.meta.msg,"")},e=>{this.isLoading=!1,this._notifier.showError("Something Went Wrong","Error")})):this.submitted=!0}showConfirmModal(e){e&&e._id&&(this.deleteTaxesId=e._id),$("#deleteTaxesModal").modal("show"),$("#deleteTaxesModal").on("hidden.bs.modal",n=>{this.deleteTaxesId=""})}hideConfirmModal(){$("#deleteTaxesModal").modal("hide")}deleteTaxes(){this.deleteTaxesId&&(this.isLoading=!0,this._LS.deleteTaxes(this.deleteTaxesId).subscribe(e=>{e.meta.status?(this.hideConfirmModal(),this.getTaxesList(),this._notifier.showSuccess(e.meta.msg,"Success"),this.isLoading=!1):(this.isLoading=!1,this._notifier.showWarning(e.meta.msg,""))},e=>{this.isLoading=!1,this._notifier.showError("Something went wrong","Error")}))}canPerformAction(e,n){this.taxesPermission[n]=this._US.hasPermission(e,n,this.permissionsArr)}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(a.qu),t.Y36(I.l),t.Y36(g),t.Y36(_.LA),t.Y36(h.KD),t.Y36(be.v))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-taxes"]],decls:107,vars:44,consts:[[1,"dashboardMain"],[1,"page-header"],[1,"account_dashboard","profile_dashboard"],[1,"login-white-box"],[1,"row","justify-content-between","listFilter"],[1,"col-12","col-sm-8","col-md-10","col-lg-10"],[1,"row"],[1,"col-12","col-md-3","col-sm-6","col-lg-3"],[1,"form-group"],[1,"input-group"],["type","text","placeholder","Search","aria-label","Search","aria-describedby","basic-addon2","name","searchKey",1,"form-control","border-0",3,"ngModel","ngModelChange"],[1,"input-group-append"],["type","button",1,"btn","searchBtn"],[1,"fa","fa-search"],[1,"col-12","col-md-4","col-lg-4","col-sm-6"],[1,"form-group","calendarInput"],["type","text","placeholder","EX: 12/02/2023  -  12/02/2023",1,"form-control","dateRangePickerTaxes"],[1,"formIconsinner",3,"click"],[1,"bi","bi-calendar-week"],["class","col-12 col-sm-4 col-md-2 col-lg-2 text-end",4,"ngIf"],["infiniteScroll","",1,"table-responsive","request_sample","fix-headertbl",3,"infiniteScrollDistance","infiniteScrollThrottle","scrollWindow","scrolled"],["class","table table-bordered","width","100%","cellspacing","0",4,"ngIf"],["style","text-align: center;padding: 140px;",4,"ngIf"],["id","addTaxesModal",1,"modal","fade"],[1,"modal-dialog","modal-lg","sample-popup-form"],[1,"modal-content"],[1,"modal-body"],[1,"form-box",3,"formGroup"],[1,"d-flex","justify-content-between","mb-3"],[4,"ngIf"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],["formControlName","productId",1,"form-control","form-ctrl",3,"ngClass"],["value",""],[3,"value",4,"ngFor","ngForOf"],["class","invalid-feedback",4,"ngIf"],["type","text","placeholder","Enter HSN","formControlName","hsn",1,"form-control","form-ctrl",3,"ngClass"],["formControlName","startCountryId",1,"form-control","form-ctrl",3,"ngClass"],["formControlName","endCountryId",1,"form-control","form-ctrl",3,"ngClass","change"],["formControlName","endStateId",1,"form-control","form-ctrl",3,"ngClass"],["type","number","placeholder","Enter tax","formControlName","tax",1,"form-control","form-ctrl",3,"ngClass"],[1,"text-end","main_btn","mt-3"],["href","javascript:void(0)","data-bs-dismiss","modal",1,"btn","btn-light","me-3"],["href","javascript:void(0)","class","btn btn-success",3,"disabled","click",4,"ngIf"],["id","deleteTaxesModal","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content","feedback-popup"],[1,"modal-header","justify-content-center"],[1,"modal-title"],[1,"form-box","form-box-dashboard"],[1,"p-3"],[1,"title","text-center","mb-5"],["type","button",1,"btn","btn-block","btn-lg","btn-success","btn-sumbit",3,"disabled","click"],[1,"fa",3,"ngClass"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn","btn-block","btn-lg","btn-outline-success","btn-sumbit"],[1,"col-12","col-sm-4","col-md-2","col-lg-2","text-end"],["href","javascript:void(0)",1,"btn","btn-success","btn-block",3,"click"],[1,"bi","bi-plus-lg"],["width","100%","cellspacing","0",1,"table","table-bordered"],[4,"ngFor","ngForOf"],[1,"text-end"],["href","javascript:void(0)","class","text-success underline-none viewText mr-1",3,"click",4,"ngIf"],["href","javascript:void(0)",1,"text-success","underline-none","viewText","mr-1",3,"click"],[1,"fa","fa-pencil"],[1,"fa","fa-trash-o"],[2,"text-align","center","padding","140px"],[3,"value"],[1,"invalid-feedback"],["href","javascript:void(0)",1,"btn","btn-success",3,"disabled","click"]],template:function(n,o){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h3"),t._uU(3,"Taxes"),t.qZA()(),t.TgZ(4,"div",2)(5,"div",3)(6,"div",4)(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8)(11,"div",9)(12,"input",10),t.NdJ("ngModelChange",function(c){return o.searchKey=c})("ngModelChange",function(c){return o.changed(c)}),t.qZA(),t.TgZ(13,"div",11)(14,"button",12),t._UZ(15,"i",13),t.qZA()()()()(),t.TgZ(16,"div",14)(17,"div",15),t._UZ(18,"input",16),t.TgZ(19,"span",17),t.NdJ("click",function(c){return o.openCalendar(c)}),t._UZ(20,"i",18),t.qZA()()()()(),t.YNc(21,Ce,4,0,"div",19),t.qZA(),t.TgZ(22,"div",20),t.NdJ("scrolled",function(c){return o.onScrollDown(c)}),t.YNc(23,xe,21,1,"table",21),t.YNc(24,qe,2,0,"div",22),t.qZA()()()(),t.TgZ(25,"div",23)(26,"div",24)(27,"div",25)(28,"div",26)(29,"div",27)(30,"div",28),t.YNc(31,Ae,2,0,"h1",29),t.YNc(32,Ue,2,0,"h1",29),t._UZ(33,"button",30),t.qZA(),t.TgZ(34,"div",8)(35,"label"),t._uU(36,"Select Product"),t.qZA(),t.TgZ(37,"select",31)(38,"option",32),t._uU(39,"Product "),t.qZA(),t._UZ(40,"option"),t.YNc(41,ye,2,2,"option",33),t.qZA(),t.YNc(42,Le,2,1,"div",34),t.qZA(),t.TgZ(43,"div",8)(44,"label"),t._uU(45,"HSN"),t.qZA(),t._UZ(46,"input",35),t.YNc(47,Fe,2,1,"div",34),t.qZA(),t.TgZ(48,"div",8)(49,"label"),t._uU(50,"Select Origin Country"),t.qZA(),t.TgZ(51,"select",36)(52,"option",32),t._uU(53,"Origin Country "),t.qZA(),t._UZ(54,"option"),t.YNc(55,Ie,2,2,"option",33),t.qZA(),t.YNc(56,we,2,1,"div",34),t.qZA(),t.TgZ(57,"div",8)(58,"label"),t._uU(59,"Select Destination Country"),t.qZA(),t.TgZ(60,"select",37),t.NdJ("change",function(c){return o.getStateList(c)}),t.TgZ(61,"option",32),t._uU(62,"Destination Country "),t.qZA(),t._UZ(63,"option"),t.YNc(64,$e,2,2,"option",33),t.qZA(),t.YNc(65,Qe,2,1,"div",34),t.qZA(),t.TgZ(66,"div",8)(67,"label"),t._uU(68,"Select Destination State"),t.qZA(),t.TgZ(69,"select",38)(70,"option",32),t._uU(71,"Destination State "),t.qZA(),t._UZ(72,"option"),t.YNc(73,Me,2,2,"option",33),t.qZA(),t.YNc(74,ke,2,1,"div",34),t.qZA(),t.TgZ(75,"div",8)(76,"label"),t._uU(77,"Tax %"),t.qZA(),t._UZ(78,"input",39),t.YNc(79,Re,2,1,"div",34),t.qZA(),t.TgZ(80,"div",40)(81,"a",41),t._uU(82,"Cancel"),t.qZA(),t.YNc(83,Ee,3,4,"button",42),t.YNc(84,Oe,3,4,"button",42),t.qZA()()()()()(),t.TgZ(85,"div",43)(86,"div",44)(87,"div",45)(88,"div",46)(89,"h5",47),t._uU(90,"Delete Taxes"),t.qZA(),t._UZ(91,"button",30),t.qZA(),t.TgZ(92,"div",26)(93,"div",48)(94,"div",49)(95,"div",50)(96,"h4"),t._uU(97,"Are you sure you want to "),t._UZ(98,"br"),t._uU(99,"delete the Taxes?"),t.qZA()(),t.TgZ(100,"div",8)(101,"button",51),t.NdJ("click",function(){return o.deleteTaxes()}),t._UZ(102,"i",52),t._uU(103," Yes"),t.qZA()(),t.TgZ(104,"div",8)(105,"button",53),t._uU(106,"No"),t.qZA()()()()()()()()),2&n&&(t.xp6(12),t.Q6J("ngModel",o.searchKey),t.xp6(9),t.Q6J("ngIf",o.taxesPermission.add),t.xp6(1),t.Q6J("infiniteScrollDistance",1)("infiniteScrollThrottle",300)("scrollWindow",!1),t.xp6(1),t.Q6J("ngIf",o.taxesList.length),t.xp6(1),t.Q6J("ngIf",!o.taxesList.length),t.xp6(5),t.Q6J("formGroup",o.taxesForm),t.xp6(2),t.Q6J("ngIf",!o.isEdit),t.xp6(1),t.Q6J("ngIf",o.isEdit),t.xp6(5),t.Q6J("ngClass",t.VKq(30,y,o.submitted&&o.taxesFormControls.productId.errors)),t.xp6(4),t.Q6J("ngForOf",o.productList),t.xp6(1),t.Q6J("ngIf",o.submitted&&o.taxesFormControls.productId.errors),t.xp6(4),t.Q6J("ngClass",t.VKq(32,y,o.submitted&&o.taxesFormControls.hsn.errors)),t.xp6(1),t.Q6J("ngIf",o.submitted&&o.taxesFormControls.hsn.errors),t.xp6(4),t.Q6J("ngClass",t.VKq(34,y,o.submitted&&o.taxesFormControls.startCountryId.errors)),t.xp6(4),t.Q6J("ngForOf",o.countryList),t.xp6(1),t.Q6J("ngIf",o.submitted&&o.taxesFormControls.startCountryId.errors),t.xp6(4),t.Q6J("ngClass",t.VKq(36,y,o.submitted&&o.taxesFormControls.endCountryId.errors)),t.xp6(4),t.Q6J("ngForOf",o.countryList),t.xp6(1),t.Q6J("ngIf",o.submitted&&o.taxesFormControls.endCountryId.errors),t.xp6(4),t.Q6J("ngClass",t.VKq(38,y,o.submitted&&o.taxesFormControls.endStateId.errors)),t.xp6(4),t.Q6J("ngForOf",o.stateList),t.xp6(1),t.Q6J("ngIf",o.submitted&&o.taxesFormControls.endStateId.errors),t.xp6(4),t.Q6J("ngClass",t.VKq(40,y,o.submitted&&o.taxesFormControls.tax.errors)),t.xp6(1),t.Q6J("ngIf",o.submitted&&o.taxesFormControls.tax.errors),t.xp6(4),t.Q6J("ngIf",!o.isEdit),t.xp6(1),t.Q6J("ngIf",o.isEdit),t.xp6(17),t.Q6J("disabled",o.isLoading),t.xp6(1),t.Q6J("ngClass",t.VKq(42,w,o.isLoading)))},dependencies:[m.mk,m.sg,m.O5,a.YN,a.Kr,a.Fj,a.wV,a.EJ,a.JJ,a.JL,a.sg,a.u,a.On,C.Ry]})}return i})()},{path:"cbm",data:{module:"CBM Range",permission:"read"},component:(()=>{class i{constructor(e,n,o,d,c,f){this._FB=e,this._notifier=n,this._LS=o,this.ngxLoaderService=d,this._US=c,this._CS=f,this.cbmList=[],this.submitted=!1,this.isLoading=!1,this.searchKey="",this.modelChanged=new Z.x,this.permissionsArr=[],this.cbmPermission={read:!1,add:!1,update:!1,delete:!1},this.page=1,this.contentPerPage=10,this.totalPage=0,this.fleetTypeList=[],this.transportTypeList=[],this.countryList=[],this.isEdit=!1,this.deleteCbmId=""}ngOnInit(){this._US.getPermissions().subscribe(e=>{this.permissionsArr=e,Object.keys(this.cbmPermission).map(n=>{this.canPerformAction("CBM Range",n)})}),this.getTransportTypeList(),this.getCountryList(),this.initAddCbmForm(),this.modelChanged.pipe((0,x.b)(500),(0,T.x)()).subscribe(e=>{this.searchKey=e,this.getCbmList()}),this.getCbmList()}ngAfterViewInit(){setTimeout(()=>{this.initDateRangePicker()},200)}initAddCbmForm(){this.cbmForm=this._FB.group({transportType:["",a.kI.required],fleetType:["",a.kI.required],cbmRange:["",a.kI.required]})}get cbmFormControls(){return this.cbmForm.controls}initDateRangePicker(){$(".dateRangePickerCbm").dateRangePicker({format:"DD-MM-YYYY",autoClose:!0}).on("datepicker-change",(e,n)=>{console.log("change",n),this.startDate=U(n.date1).valueOf(),this.endDate=U(n.date2).valueOf(),this.getCbmList()})}openCalendar(e){e.stopPropagation(),$(".dateRangePickerCbm").data("dateRangePicker").open()}onScrollDown(e){this.page<this.totalPage&&(this.page+=1,this.getCbmList(!0))}getCbmList(e){this.ngxLoaderService.start(),this._LS.getCbmList(this.searchKey,this.startDate,this.endDate,this.page,this.contentPerPage).subscribe(n=>{this.ngxLoaderService.stop(),n.meta.status?(this.totalPage=this.totalPage?this.totalPage:Math.ceil(n.metadata[0].total/this.contentPerPage),this.cbmList=e?[...this.cbmList,...n.data]:n.data):(this.cbmList=e?this.cbmList:[],e||this._notifier.showWarning(n.meta.msg,""))},n=>{this.ngxLoaderService.stop()})}changed(e){this.modelChanged.next(e)}getFleetTypeList(e){if(this.fleetTypeList=[],e.target.value){let n;"road"==e.target.value?n="ROAD_FLEET":"air"==e.target.value?n="AIR_FLEET":"sea"==e.target.value&&(n="SEA_FLEET"),this._CS.getAppConfigByKey(n).subscribe(o=>{if(o.meta.status){let d=o.data.value.split("|").map(c=>({value:(c=c.trim()).toLowerCase(),label:c}));this.fleetTypeList.push(...d)}else this.fleetTypeList=[],this._notifier.showWarning(o.meta.msg,"")},o=>{this.ngxLoaderService.stop()})}}getTransportTypeList(){this._CS.getAppConfigByKey("TYPE_FLEET").subscribe(e=>{if(e.meta.status){let n=e.data.value.split("|").map(o=>({value:(o=o.trim()).toLowerCase(),label:o}));this.transportTypeList.push(...n)}else this.transportTypeList=[],this._notifier.showWarning(e.meta.msg,"")},e=>{this.ngxLoaderService.stop()})}getCountryList(){this._LS.getCountryList().subscribe(e=>{e.meta.status?this.countryList=e.data:(this.countryList=[],this._notifier.showWarning(e.meta.msg,""))},e=>{this.ngxLoaderService.stop()})}showCbmModal(e){e&&e._id&&(this.isEdit=!0,this.cbmData=e,this.cbmForm.patchValue(this.cbmData)),$("#addCbmModal").modal("show"),$("#addCbmModal").on("hidden.bs.modal",n=>{this.isEdit=!1,this.submitted=!1,this.cbmData=void 0,this.cbmForm.reset({categoryId:""})})}hideCbmModal(){$("#addCbmModal").modal("hide")}addCbm(){this.cbmForm.valid?(this.isLoading=!0,this._LS.addCbm(this.cbmForm.value).subscribe(e=>{this.isLoading=!1,e.meta.status?(this.getCbmList(),this.hideCbmModal(),this._notifier.showSuccess(e.meta.msg,"Success")):this._notifier.showWarning(e.meta.msg,"")},e=>{this.isLoading=!1,this._notifier.showError("Something Went Wrong","Error")})):this.submitted=!0}updateCbm(){this.cbmForm.valid?(this.isLoading=!0,this._LS.updateCbm(this.cbmForm.value,this.cbmData._id).subscribe(e=>{this.isLoading=!1,e.meta.status?(this.getCbmList(),this.hideCbmModal(),this._notifier.showSuccess(e.meta.msg,"Success")):this._notifier.showWarning(e.meta.msg,"")},e=>{this.isLoading=!1,this._notifier.showError("Something Went Wrong","Error")})):this.submitted=!0}showConfirmModal(e){e&&e._id&&(this.deleteCbmId=e._id),$("#deleteCbmModal").modal("show"),$("#deleteCbmModal").on("hidden.bs.modal",n=>{this.deleteCbmId=""})}hideConfirmModal(){$("#deleteCbmModal").modal("hide")}deleteCbm(){this.deleteCbmId&&(this.isLoading=!0,this._LS.deleteCbm(this.deleteCbmId).subscribe(e=>{e.meta.status?(this.hideConfirmModal(),this.getCbmList(),this._notifier.showSuccess(e.meta.msg,"Success"),this.isLoading=!1):(this.isLoading=!1,this._notifier.showWarning(e.meta.msg,""))},e=>{this.isLoading=!1,this._notifier.showError("Something went wrong","Error")}))}canPerformAction(e,n){this.cbmPermission[n]=this._US.hasPermission(e,n,this.permissionsArr)}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(a.qu),t.Y36(I.l),t.Y36(g),t.Y36(_.LA),t.Y36(h.KD),t.Y36(h.v_))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-cbm-range"]],decls:84,vars:30,consts:[[1,"dashboardMain"],[1,"page-header"],[1,"account_dashboard","profile_dashboard"],[1,"login-white-box"],[1,"row","justify-content-between","listFilter"],[1,"col-12","col-sm-8","col-md-10","col-lg-10"],[1,"row"],[1,"col-12","col-md-3","col-sm-6","col-lg-3"],[1,"form-group"],[1,"input-group"],["type","text","placeholder","Search","aria-label","Search","aria-describedby","basic-addon2","name","searchKey",1,"form-control","border-0",3,"ngModel","ngModelChange"],[1,"input-group-append"],["type","button",1,"btn","searchBtn"],[1,"fa","fa-search"],[1,"col-12","col-md-4","col-lg-4","col-sm-6"],[1,"form-group","calendarInput"],["type","text","placeholder","EX: 12/02/2023  -  12/02/2023",1,"form-control","dateRangePickerCbm"],[1,"formIconsinner",3,"click"],[1,"bi","bi-calendar-week"],["class","col-12 col-sm-4 col-md-2 col-lg-2 text-end",4,"ngIf"],["infiniteScroll","",1,"table-responsive","request_sample","fix-headertbl",3,"infiniteScrollDistance","infiniteScrollThrottle","scrollWindow","scrolled"],["class","table table-bordered","width","100%","cellspacing","0",4,"ngIf"],["style","text-align: center;padding: 140px;",4,"ngIf"],["id","addCbmModal",1,"modal","fade"],[1,"modal-dialog","modal-lg","sample-popup-form"],[1,"modal-content"],[1,"modal-body"],[1,"form-box",3,"formGroup"],[1,"d-flex","justify-content-between","mb-3"],[4,"ngIf"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],["formControlName","transportType",1,"form-control","form-ctrl",3,"ngClass","change"],["value",""],[3,"value",4,"ngFor","ngForOf"],["class","invalid-feedback",4,"ngIf"],["formControlName","fleetType",1,"form-control","form-ctrl",3,"ngClass"],["type","number","placeholder","Enter CBM Range","formControlName","cbmRange",1,"form-control","form-ctrl",3,"ngClass"],[1,"text-end","main_btn","mt-3"],["href","javascript:void(0)","data-bs-dismiss","modal",1,"btn","btn-light","me-3"],["href","javascript:void(0)","class","btn btn-success",3,"disabled","click",4,"ngIf"],["id","deleteCbmModal","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content","feedback-popup"],[1,"modal-header","justify-content-center"],[1,"modal-title"],[1,"form-box","form-box-dashboard"],[1,"p-3"],[1,"title","text-center","mb-5"],["type","button",1,"btn","btn-block","btn-lg","btn-success","btn-sumbit",3,"disabled","click"],[1,"fa",3,"ngClass"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn","btn-block","btn-lg","btn-outline-success","btn-sumbit"],[1,"col-12","col-sm-4","col-md-2","col-lg-2","text-end"],["href","javascript:void(0)",1,"btn","btn-success","btn-block",3,"click"],[1,"bi","bi-plus-lg"],["width","100%","cellspacing","0",1,"table","table-bordered"],[4,"ngFor","ngForOf"],[1,"text-end"],["href","javascript:void(0)","class","text-success underline-none viewText mr-1",3,"click",4,"ngIf"],["href","javascript:void(0)",1,"text-success","underline-none","viewText","mr-1",3,"click"],[1,"fa","fa-pencil"],[1,"fa","fa-trash-o"],[2,"text-align","center","padding","140px"],[3,"value"],[1,"invalid-feedback"],["href","javascript:void(0)",1,"btn","btn-success",3,"disabled","click"]],template:function(n,o){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h3"),t._uU(3,"CBM Range"),t.qZA()(),t.TgZ(4,"div",2)(5,"div",3)(6,"div",4)(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8)(11,"div",9)(12,"input",10),t.NdJ("ngModelChange",function(c){return o.searchKey=c})("ngModelChange",function(c){return o.changed(c)}),t.qZA(),t.TgZ(13,"div",11)(14,"button",12),t._UZ(15,"i",13),t.qZA()()()()(),t.TgZ(16,"div",14)(17,"div",15),t._UZ(18,"input",16),t.TgZ(19,"span",17),t.NdJ("click",function(c){return o.openCalendar(c)}),t._UZ(20,"i",18),t.qZA()()()()(),t.YNc(21,We,4,0,"div",19),t.qZA(),t.TgZ(22,"div",20),t.NdJ("scrolled",function(c){return o.onScrollDown(c)}),t.YNc(23,Ge,15,1,"table",21),t.YNc(24,Be,2,0,"div",22),t.qZA()()()(),t.TgZ(25,"div",23)(26,"div",24)(27,"div",25)(28,"div",26)(29,"div",27)(30,"div",28),t.YNc(31,Xe,2,0,"h1",29),t.YNc(32,ze,2,0,"h1",29),t._UZ(33,"button",30),t.qZA(),t.TgZ(34,"div",8)(35,"label"),t._uU(36,"Select Transport Type"),t.qZA(),t.TgZ(37,"select",31),t.NdJ("change",function(c){return o.getFleetTypeList(c)}),t.TgZ(38,"option",32),t._uU(39,"Transport Type "),t.qZA(),t._UZ(40,"option"),t.YNc(41,ti,2,2,"option",33),t.qZA(),t.YNc(42,ii,2,1,"div",34),t.qZA(),t.TgZ(43,"div",8)(44,"label"),t._uU(45,"Select Fleet Type"),t.qZA(),t.TgZ(46,"select",35)(47,"option",32),t._uU(48,"Fleet Type "),t.qZA(),t._UZ(49,"option"),t.YNc(50,oi,2,2,"option",33),t.qZA(),t.YNc(51,si,2,1,"div",34),t.qZA(),t.TgZ(52,"div",8)(53,"label"),t._uU(54,"CBM Range"),t.qZA(),t._UZ(55,"input",36),t.YNc(56,ai,2,1,"div",34),t.qZA(),t.TgZ(57,"div",37)(58,"a",38),t._uU(59,"Cancel"),t.qZA(),t.YNc(60,li,3,4,"button",39),t.YNc(61,di,3,4,"button",39),t.qZA()()()()()(),t.TgZ(62,"div",40)(63,"div",41)(64,"div",42)(65,"div",43)(66,"h5",44),t._uU(67,"Delete CBM Range"),t.qZA(),t._UZ(68,"button",30),t.qZA(),t.TgZ(69,"div",26)(70,"div",45)(71,"div",46)(72,"div",47)(73,"h4"),t._uU(74,"Are you sure you want to "),t._UZ(75,"br"),t._uU(76,"delete the CBM Range?"),t.qZA()(),t.TgZ(77,"div",8)(78,"button",48),t.NdJ("click",function(){return o.deleteCbm()}),t._UZ(79,"i",49),t._uU(80," Yes"),t.qZA()(),t.TgZ(81,"div",8)(82,"button",50),t._uU(83,"No"),t.qZA()()()()()()()()),2&n&&(t.xp6(12),t.Q6J("ngModel",o.searchKey),t.xp6(9),t.Q6J("ngIf",o.cbmPermission.add),t.xp6(1),t.Q6J("infiniteScrollDistance",1)("infiniteScrollThrottle",300)("scrollWindow",!1),t.xp6(1),t.Q6J("ngIf",o.cbmList.length),t.xp6(1),t.Q6J("ngIf",!o.cbmList.length),t.xp6(5),t.Q6J("formGroup",o.cbmForm),t.xp6(2),t.Q6J("ngIf",!o.isEdit),t.xp6(1),t.Q6J("ngIf",o.isEdit),t.xp6(5),t.Q6J("ngClass",t.VKq(22,Q,o.submitted&&o.cbmFormControls.transportType.errors)),t.xp6(4),t.Q6J("ngForOf",o.transportTypeList),t.xp6(1),t.Q6J("ngIf",o.submitted&&o.cbmFormControls.transportType.errors),t.xp6(4),t.Q6J("ngClass",t.VKq(24,Q,o.submitted&&o.cbmFormControls.fleetType.errors)),t.xp6(4),t.Q6J("ngForOf",o.fleetTypeList),t.xp6(1),t.Q6J("ngIf",o.submitted&&o.cbmFormControls.fleetType.errors),t.xp6(4),t.Q6J("ngClass",t.VKq(26,Q,o.submitted&&o.cbmFormControls.cbmRange.errors)),t.xp6(1),t.Q6J("ngIf",o.submitted&&o.cbmFormControls.cbmRange.errors),t.xp6(4),t.Q6J("ngIf",!o.isEdit),t.xp6(1),t.Q6J("ngIf",o.isEdit),t.xp6(17),t.Q6J("disabled",o.isLoading),t.xp6(1),t.Q6J("ngClass",t.VKq(28,D,o.isLoading)))},dependencies:[m.mk,m.sg,m.O5,a.YN,a.Kr,a.Fj,a.wV,a.EJ,a.JJ,a.JL,a.sg,a.u,a.On,C.Ry]})}return i})()}];let ui=(()=>{class i{static#t=this.\u0275fac=function(n){return new(n||i)};static#e=this.\u0275mod=t.oAB({type:i});static#i=this.\u0275inj=t.cJS({imports:[l.Bz.forChild(ci),l.Bz]})}return i})(),pi=(()=>{class i{static#t=this.\u0275fac=function(n){return new(n||i)};static#e=this.\u0275mod=t.oAB({type:i});static#i=this.\u0275inj=t.cJS({imports:[m.ez,ui,a.UX,a.u5,C.Rq]})}return i})()}}]);